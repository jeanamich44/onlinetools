<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Chrono Express - Générer Bordereau</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>

    <div id="overlay" style="flex-direction: column; gap: 20px;">
        <div class="spinner"></div>
        <div id="timerContainer" style="display:none; text-align: center; color: #fff;">
            <span style="font-size: 1.2rem; font-weight: bold;" id="timer">00:00</span>
            <span class="info-icon" style="margin-left: 10px; vertical-align: middle;"
                data-tooltip="Génération en cours...">i</span>
        </div>
    </div>

    <!-- Weight Limit Modal -->
    <div id="weightModal" class="modal-overlay" style="display:none;">
        <div class="modal-box blue-theme">
            <h3>Attention - Poids Excéde 30kg</h3>
            <p>Pour tout envoi supérieur à 30kg, veuillez contacter le gérant.</p>
            <a href="https://t.me/RheyyFonda" target="_blank" class="contact-btn">Contacter Support (Telegram)</a>
            <button onclick="closeWeightModal()" class="close-btn">Fermer</button>
        </div>
    </div>

    <div id="statusMessage" style="position:fixed; top:80px; width:100%; text-align:center; z-index:900;"></div>

    <header class="header">
        <div class="header-inner">
            <a href="../index.html" class="logo">OnlineTools</a>
            <nav class="nav">
                <a href="../index.html">Home</a>
                <a href="../tools/tools-liste.html">Tools</a>
                <a href="../contact.html">Contact</a>

            </nav>
        </div>
    </header>

    <main class="content form-container">

        <h1 class="page-title">Chrono Express - International</h1>

        <form id="chronoForm" onsubmit="handleSubmit(event)">
            <!-- Product Code for Express (Using 13 or mapped default for now) -->
            <input type="hidden" name="valeurproduct" value="monde">

            <div class="sections-grid">
                <!-- Section 1: Expéditeur -->
                <div class="form-section">
                    <div class="section-header">
                        <span>
                            <span class="section-number">1</span> Expéditeur
                            <span class="info-icon"
                                data-tooltip="Si laissés vides, des coordonnées aléatoires uniques seront utilisées.">i</span>
                        </span>
                        <span>FRANCE</span>
                    </div>
                    <div class="section-content">
                        <div class="radio-group" style="margin-bottom: 20px;">
                            <label>Type *</label>
                            <label><input type="radio" name="senderType" value="0"> Professionnel</label>
                            <label><input type="radio" name="senderType" value="1" checked> Particulier</label>
                        </div>

                        <div class="form-row">
                            <div class="form-group" id="senderCompanyDiv" style="display:none;">
                                <label>Nom de société</label>
                                <input type="text" name="senderCompanyName" maxlength="60">
                            </div>
                            <input type="hidden" name="senderCountry" value="FR">
                            <div class="form-group">
                                <label>Nom</label>
                                <input type="text" name="senderLastname" placeholder="Vide = Aléatoire" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Prénom</label>
                                <input type="text" name="senderFirstname" placeholder="Vide = Aléatoire" maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Code Postal</label>
                                <input type="text" name="senderCP" pattern="\d+" placeholder="Vide = Aléatoire"
                                    maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Téléphone</label>
                                <input type="tel" name="senderHandphone" minlength="8" placeholder="Vide = Aléatoire"
                                    value="" maxlength="14">
                            </div>
                            <div class="form-group">
                                <label>Ville</label>
                                <input type="text" name="senderCity" placeholder="Vide = Aléatoire" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>E-mail</label>
                                <input type="email" name="senderEmail" placeholder="Vide = Aléatoire" maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Adresse</label>
                                <input type="text" name="senderAddress" placeholder="Vide = Aléatoire" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Complément adresse</label>
                                <input type="text" name="senderAddress2" maxlength="20">
                            </div>
                            <div class="form-group">
                                <label>Référence Expéditeur</label>
                                <input type="text" name="senderRef" maxlength="14">
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <label><input type="checkbox" name="exp_save"> Conserver cet expéditeur pour mes prochains
                                envois</label>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Destinataire -->
                <div class="form-section">
                    <div class="section-header">
                        <span><span class="section-number">2</span> Destinataire</span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="country-eligible-btn" onclick="openCountryModal()">
                                Pays éligible(s) <span class="info-icon"
                                    style="background: #fff; color: #007bff; font-weight: bold; border-radius: 50%; padding: 0 6px;">?</span>
                            </span>
                            <span id="destCountryDisplay">INTERNATIONAL</span>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="radio-group" style="margin-bottom: 20px;">
                            <label>Type *</label>
                            <label><input type="radio" name="receiverType" value="0"> Professionnel</label>
                            <label><input type="radio" name="receiverType" value="1" checked> Particulier</label>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Pays *</label>
                                <select name="receiverCountry" required onchange="updateDestCountry(this)">
                                    <option value="">Choisir un pays...</option>
                                    <option value="AF">AFGHANISTAN</option>
                                    <option value="ZA">AFRIQUE DU SUD</option>
                                    <option value="AL">ALBANIE</option>
                                    <option value="DZ">ALGÉRIE</option>
                                    <option value="DE">ALLEMAGNE</option>
                                    <option value="AD">ANDORRE</option>
                                    <option value="AO">ANGOLA</option>
                                    <option value="AI">ANGUILLA</option>
                                    <option value="AQ">ANTARCTIQUE</option>
                                    <option value="AG">ANTIGUA-ET-BARBUDA</option>
                                    <option value="SA">ARABIE SAOUDITE</option>
                                    <option value="AR">ARGENTINE</option>
                                    <option value="AM">ARMÉNIE</option>
                                    <option value="AW">ARUBA</option>
                                    <option value="AU">AUSTRALIE</option>
                                    <option value="AT">AUTRICHE</option>
                                    <option value="AZ">AZERBAÏDJAN</option>
                                    <option value="BS">BAHAMAS</option>
                                    <option value="BH">BAHREÏN</option>
                                    <option value="BD">BANGLADESH</option>
                                    <option value="BB">BARBADE</option>
                                    <option value="BE">BELGIQUE</option>
                                    <option value="BZ">BELIZE</option>
                                    <option value="BJ">BÉNIN</option>
                                    <option value="BM">BERMUDES</option>
                                    <option value="BT">BHOUTAN</option>
                                    <option value="BY">BIÉLORUSSIE</option>
                                    <option value="BO">BOLIVIE</option>
                                    <option value="BA">BOSNIE-HERZÉGOVINE</option>
                                    <option value="BW">BOTSWANA</option>
                                    <option value="BR">BRÉSIL</option>
                                    <option value="BN">BRUNÉI DARUSSALAM</option>
                                    <option value="BG">BULGARIE</option>
                                    <option value="BF">BURKINA FASO</option>
                                    <option value="BI">BURUNDI</option>
                                    <option value="KH">CAMBODGE</option>
                                    <option value="CM">CAMEROUN</option>
                                    <option value="CA">CANADA</option>
                                    <option value="CV">CAP-VERT</option>
                                    <option value="CL">CHILI</option>
                                    <option value="CN">CHINE</option>
                                    <option value="CY">CHYPRE</option>
                                    <option value="CO">COLOMBIE</option>
                                    <option value="KM">COMORES</option>
                                    <option value="CG">CONGO</option>
                                    <option value="CD">CONGO (RÉP. DÉM.)</option>
                                    <option value="KR">CORÉE DU SUD</option>
                                    <option value="KP">CORÉE DU NORD</option>
                                    <option value="CR">COSTA RICA</option>
                                    <option value="CI">CÔTE D'IVOIRE</option>
                                    <option value="HR">CROATIE</option>
                                    <option value="CU">CUBA</option>
                                    <option value="DK">DANEMARK</option>
                                    <option value="DJ">DJIBOUTI</option>
                                    <option value="DM">DOMINIQUE</option>
                                    <option value="EG">ÉGYPTE</option>
                                    <option value="AE">ÉMIRATS ARABES UNIS</option>
                                    <option value="EC">ÉQUATEUR</option>
                                    <option value="ER">ÉRYTHRÉE</option>
                                    <option value="ES">ESPAGNE</option>
                                    <option value="EE">ESTONIE</option>
                                    <option value="US">ÉTATS-UNIS</option>
                                    <option value="ET">ÉTHIOPIE</option>
                                    <option value="FJ">FIDJI</option>
                                    <option value="FI">FINLANDE</option>
                                    <option value="FR">FRANCE</option>
                                    <option value="GA">GABON</option>
                                    <option value="GM">GAMBIE</option>
                                    <option value="GE">GÉORGIE</option>
                                    <option value="GH">GHANA</option>
                                    <option value="GI">GIBRALTAR</option>
                                    <option value="GR">GRÈCE</option>
                                    <option value="GD">GRENADE</option>
                                    <option value="GL">GROENLAND</option>
                                    <option value="GP">GUADELOUPE</option>
                                    <option value="GU">GUAM</option>
                                    <option value="GT">GUATEMALA</option>
                                    <option value="GG">GUERNESEY</option>
                                    <option value="GN">GUINÉE</option>
                                    <option value="GW">GUINÉE-BISSAU</option>
                                    <option value="GQ">GUINÉE ÉQUATORIALE</option>
                                    <option value="GY">GUYANA</option>
                                    <option value="GF">GUYANE FRANÇAISE</option>
                                    <option value="HT">HAÏTI</option>
                                    <option value="HN">HONDURAS</option>
                                    <option value="HK">HONG KONG</option>
                                    <option value="HU">HONGRIE</option>
                                    <option value="IM">ÎLE DE MAN</option>
                                    <option value="IN">INDE</option>
                                    <option value="ID">INDONÉSIE</option>
                                    <option value="IQ">IRAK</option>
                                    <option value="IR">IRAN</option>
                                    <option value="IE">IRLANDE</option>
                                    <option value="IS">ISLANDE</option>
                                    <option value="IL">ISRAËL</option>
                                    <option value="IT">ITALIE</option>
                                    <option value="JM">JAMAIQUE</option>
                                    <option value="JP">JAPON</option>
                                    <option value="JE">JERSEY</option>
                                    <option value="JO">JORDANIE</option>
                                    <option value="KZ">KAZAKHSTAN</option>
                                    <option value="KE">KENYA</option>
                                    <option value="KG">KIRGHIZISTAN</option>
                                    <option value="KI">KIRIBATI</option>
                                    <option value="KW">KOWEÏT</option>
                                    <option value="LA">LAOS</option>
                                    <option value="LS">LESOTHO</option>
                                    <option value="LV">LETTONIE</option>
                                    <option value="LB">LIBAN</option>
                                    <option value="LR">LIBÉRIA</option>
                                    <option value="LY">LIBYE</option>
                                    <option value="LI">LIECHTENSTEIN</option>
                                    <option value="LT">LITUANIE</option>
                                    <option value="LU">LUXEMBOURG</option>
                                    <option value="MO">MACAO</option>
                                    <option value="MK">MACÉDOINE DU NORD</option>
                                    <option value="MG">MADAGASCAR</option>
                                    <option value="MY">MALAISIE</option>
                                    <option value="MW">MALAWI</option>
                                    <option value="MV">MALDIVES</option>
                                    <option value="ML">MALI</option>
                                    <option value="MT">MALTE</option>
                                    <option value="MA">MAROC</option>
                                    <option value="MQ">MARTINIQUE</option>
                                    <option value="MU">MAURICE</option>
                                    <option value="MR">MAURITANIE</option>
                                    <option value="YT">MAYOTTE</option>
                                    <option value="MX">MEXIQUE</option>
                                    <option value="FM">MICRONÉSIE</option>
                                    <option value="MD">MOLDAVIE</option>
                                    <option value="MC">MONACO</option>
                                    <option value="MN">MONGOLIE</option>
                                    <option value="ME">MONTÉNÉGRO</option>
                                    <option value="MS">MONTSERRAT</option>
                                    <option value="MZ">MOZAMBIQUE</option>
                                    <option value="MM">MYANMAR (BIRMANIE)</option>
                                    <option value="NA">NAMIBIE</option>
                                    <option value="NR">NAURU</option>
                                    <option value="NP">NÉPAL</option>
                                    <option value="NI">NICARAGUA</option>
                                    <option value="NE">NIGER</option>
                                    <option value="NG">NIGÉRIA</option>
                                    <option value="NU">NIUE</option>
                                    <option value="NO">NORVÈGE</option>
                                    <option value="NC">NOUVELLE-CALÉDONIE</option>
                                    <option value="NZ">NOUVELLE-ZÉLANDE</option>
                                    <option value="OM">OMAN</option>
                                    <option value="UG">OUGANDA</option>
                                    <option value="UZ">OUZBÉKISTAN</option>
                                    <option value="PK">PAKISTAN</option>
                                    <option value="PW">PALAOS</option>
                                    <option value="PS">PALESTINE</option>
                                    <option value="PA">PANAMA</option>
                                    <option value="PG">PAPOUASIE-NOUVELLE-GUINÉE</option>
                                    <option value="PY">PARAGUAY</option>
                                    <option value="NL">PAYS-BAS</option>
                                    <option value="PE">PÉROU</option>
                                    <option value="PH">PHILIPPINES</option>
                                    <option value="PL">POLOGNE</option>
                                    <option value="PF">POLYNÉSIE FRANÇAISE</option>
                                    <option value="PR">PORTO RICO</option>
                                    <option value="PT">PORTUGAL</option>
                                    <option value="QA">QATAR</option>
                                    <option value="RE">RÉUNION</option>
                                    <option value="RO">ROUMANIE</option>
                                    <option value="GB">ROYAUME-UNI</option>
                                    <option value="RU">RUSSIE</option>
                                    <option value="RW">RWANDA</option>
                                    <option value="EH">SAHARA OCCIDENTAL</option>
                                    <option value="BL">SAINT-BARTHÉLEMY</option>
                                    <option value="KN">SAINT-KITTS-ET-NEVIS</option>
                                    <option value="SM">SAINT-MARIN</option>
                                    <option value="MF">SAINT-MARTIN</option>
                                    <option value="PM">SAINT-PIERRE-ET-MIQUELON</option>
                                    <option value="VC">SAINT-VINCENT-ET-LES-GRENADINES</option>
                                    <option value="LC">SAINTE-LUCIE</option>
                                    <option value="SB">SALOMON</option>
                                    <option value="WS">SAMOA</option>
                                    <option value="AS">SAMOA AMÉRICAINES</option>
                                    <option value="ST">SAO TOMÉ-ET-PRINCIPE</option>
                                    <option value="SN">SÉNÉGAL</option>
                                    <option value="RS">SERBIE</option>
                                    <option value="SC">SEYCHELLES</option>
                                    <option value="SL">SIERRA LEONE</option>
                                    <option value="SG">SINGAPOUR</option>
                                    <option value="SK">SLOVAQUIE</option>
                                    <option value="SI">SLOVÉNIE</option>
                                    <option value="SO">SOMALIE</option>
                                    <option value="SD">SOUDAN</option>
                                    <option value="LK">SRI LANKA</option>
                                    <option value="SE">SUÈDE</option>
                                    <option value="CH">SUISSE</option>
                                    <option value="SR">SURINAME</option>
                                    <option value="SY">SYRIE</option>
                                    <option value="TJ">TADJIKISTAN</option>
                                    <option value="TW">TAÏWAN</option>
                                    <option value="TZ">TANZANIE</option>
                                    <option value="TD">TCHAD</option>
                                    <option value="CZ">TCHÉQUIE</option>
                                    <option value="TF">TERRES AUSTRALES FRANÇAISES</option>
                                    <option value="TH">THAÏLANDE</option>
                                    <option value="TL">TIMOR ORIENTAL</option>
                                    <option value="TG">TOGO</option>
                                    <option value="TK">TOKELAU</option>
                                    <option value="TO">TONGA</option>
                                    <option value="TT">TRINITÉ-ET-TOBAGO</option>
                                    <option value="TN">TUNISIE</option>
                                    <option value="TM">TURKMÉNISTAN</option>
                                    <option value="TR">TURQUIE</option>
                                    <option value="TV">TUVALU</option>
                                    <option value="UA">UKRAINE</option>
                                    <option value="UY">URUGUAY</option>
                                    <option value="VU">VANUATU</option>
                                    <option value="VE">VENEZUELA</option>
                                    <option value="VN">VIETNAM</option>
                                    <option value="WF">WALLIS-ET-FUTUNA</option>
                                    <option value="YE">YÉMEN</option>
                                    <option value="ZM">ZAMBIE</option>
                                    <option value="ZW">ZIMBABWE</option>
                                </select>
                            </div>
                            <div class="form-group" id="receiverCompanyDiv">
                                <label>Raison Sociale *</label>
                                <input type="text" name="receiverCompanyName" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Nom *</label>
                                <input type="text" name="receiverLastname" required maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Code Postal *</label>
                                <input type="text" name="receiverCP" required maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Prénom *</label>
                                <input type="text" name="receiverFirstname" maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Ville *</label>
                                <input type="text" name="receiverCity" required maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Téléphone *</label>
                                <input type="tel" name="receiverHandphone" minlength="8" required maxlength="14">
                            </div>
                            <div class="form-group">
                                <label>Adresse *</label>
                                <input type="text" name="receiverAddress" required maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>E-mail *</label>
                                <input type="email" name="receiverEmail" required maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Code Bâtiment</label>
                                <input type="text" name="receiverAddress3" maxlength="8">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Complément adresse</label>
                                <input type="text" name="receiverAddress2" maxlength="20">
                            </div>
                            <div class="form-group">
                                <label>Référence Destinataire</label>
                                <input type="text" name="receiverRef" maxlength="14">
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <label><input type="checkbox" name="dest_save"> Conserver ce destinataire pour mes prochains
                                envois</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sections-grid">
                <!-- Section 3: Colis -->
                <div class="form-section">
                    <div class="section-header">
                        <span><span class="section-number">3</span> Colis</span>
                    </div>
                    <div class="section-content">
                        <div class="form-row">

                            <div class="form-group">
                                <label>Poids unitaire (kg) * <span class="info-icon"
                                        data-tooltip="Max 30kg">?</span></label>
                                <input type="number" name="packageWeight" id="weightInput" required step="0.1"
                                    placeholder="Ex: 5">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Nom de l'envoi</label>
                                <input type="text" name="shippingRef" maxlength="15">
                            </div>
                            <div class="form-group">
                                <label>Date de l'envoi</label>
                                <input type="date" name="shippingDate_input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Longueur (cm) *</label>
                                <input type="number" name="packageLength" placeholder="L" min="30" max="150" required>
                            </div>
                            <div class="form-group">
                                <label>Largeur (cm) *</label>
                                <input type="number" name="packageWidth" placeholder="l" min="21" max="150" required>
                            </div>
                            <div class="form-group">
                                <label>Hauteur (cm) *</label>
                                <input type="number" name="packageHeight" placeholder="h" min="1" max="150" required>
                            </div>
                        </div>
                        <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 5px;">
                            Dimensions Minimales : Longueur: 30cm, Largeur: 21cm, Hauteur: 1cm
                        </div>
                        <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 15px;">
                            Dimensions Maximales : Longueur: 150cm, Largeur: 150cm, Hauteur: 150cm.
                        </div>

                        <div class="form-group" style="margin-bottom: 15px;">
                            <label>Nature du contenu *</label>
                            <div class="radio-group">
                                <label><input type="radio" name="shippingContentNature" value="marchandise" checked>
                                    Marchandise</label>
                                <label><input type="radio" name="shippingContentNature" value="document">
                                    Document</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Contenu de l'envoi * <span class="info-icon"
                                    data-tooltip="Description simple (Lampe, Perceuse...)">?</span></label>
                            <input type="text" name="shippingContent" required maxlength="60"
                                placeholder="Ex: Vêtements, Pièces électroniques...">
                        </div>

                        <fieldset style="border: 1px solid #444; padding: 10px; border-radius: 5px; margin-top: 15px;">
                            <legend style="color: #fff; padding: 0 5px;">Informations douanières</legend>
                            <div class="form-group">
                                <label>Valeur déclarée en douane * <span class="info-icon"
                                        data-tooltip="Conseil : Mettez une valeur basse (ex: 1€) pour limiter les frais de douane.">i</span></label>
                                <div style="display: flex; align-items: center;">
                                    <input type="number" name="packageValue" required value="1"
                                        style="width: 100px; margin-right: 10px;">
                                    <span>€ (euros)</span>
                                </div>
                            </div>

                            <div class="alert-box"
                                style="background: rgba(50, 150, 255, 0.1); border-left: 3px solid #007bff; padding: 10px; margin: 10px 0; font-size: 0.85rem;">
                                Vous avez l'obligation légale de joindre soit une facture pro-forma soit une facture
                                commerciale à votre envoi, en 3 exemplaires.
                            </div>


                        </fieldset>

                        <div class="checkbox-group" style="margin-top: 10px;">
                            <label><input type="checkbox" name="colis_save"> Conserver ces caractéristiques pour mes
                                prochains envois</label>
                        </div>
                    </div>
                </div>

                <!-- Section 4: Options -->
                <div class="form-section">
                    <div class="section-header">
                        <span><span class="section-number">4</span> Options & Notifications</span>
                    </div>
                    <div class="section-content">
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="shipmentTracking_box" checked> Suivi mail
                                expéditeur</label>
                            <input type="hidden" name="shipmentTracking" value="on">
                        </div>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="notifyTheReceiver_box" checked> Suivi mail
                                destinataire</label>
                            <input type="hidden" name="notifyTheReceiver" value="on">
                        </div>



                        <div class="form-group" style="margin-top: 15px;">
                            <label>Mail Tiers (Réception Bordereau) *</label>
                            <input type="email" name="sendToThirdPersonInfo" required maxlength="60"
                                placeholder="Votre email pour recevoir le PDF">
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-bar">
                <button type="submit" class="btn-validate" id="btn-validate">Générer Preview (Gratuit)</button>
            </div>

            <div id="message"></div>
            <div style="margin-top: 20px; border-top: 1px solid #ccc; padding-top: 20px; text-align: center;">
                <p style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">Le bordereau officiel sans filigrane est
                    payant (1€).</p>
                <button id="btnPay" type="button"
                    style="background-color: #28a745; width: 100%; color: white; border: none; padding: 10px; border-radius: 4px; cursor: pointer; font-size: 1.1rem; font-weight: bold;">Valider
                    et Payer le Bordereau (1€)</button>
            </div>



        </form>
        <a class="back" href="./chronopost-liste.html">Retour</a>
    </main>
    <style>
        /* Custom Country Select Styles */
        .country-wrapper {
            position: relative;
        }

        .country-input {
            width: 100%;
            /* Inherit or match form styles */
        }

        .country-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #2b2b2b;
            /* Dark theme match */
            border: 1px solid #444;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1001;
            /* Above other elements */
            display: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .country-option {
            padding: 10px;
            cursor: pointer;
            color: #eee;
            border-bottom: 1px solid #333;
        }

        .country-option:hover,
        .country-option.focus {
            background-color: #007bff;
            color: #fff;
        }
    </style>
    <script src="../js/chronopost-autocomplete-world.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Check for success from payment redirect
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('success')) {
                const savedData = localStorage.getItem('chronoData');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    localStorage.removeItem('chronoData');
                    // Automatically trigger the generation
                    performGeneration(data);
                }
            }

            initCountrySelector();

            try {
                // Sync Checkboxes
                document.querySelectorAll('input[type="checkbox"]').forEach(box => {
                    box.addEventListener('change', e => {
                        const hidden = e.target.parentElement.nextElementSibling;
                        if (hidden && hidden.type === 'hidden') {
                            hidden.value = e.target.checked ? 'on' : 'off';
                        }
                    });
                });

                // Toggles
                function setupVisibilityToggle(radioName, divId) {
                    const radios = document.getElementsByName(radioName);
                    const targetDiv = document.getElementById(divId);
                    if (!targetDiv) return;

                    function update() {
                        const checked = document.querySelector(`input[name="${radioName}"]:checked`);
                        if (checked) {
                            if (checked.value === "0" || checked.value === "pro") {
                                targetDiv.style.display = "block";
                            } else {
                                targetDiv.style.display = "none";
                            }
                        }
                    }
                    radios.forEach(r => r.addEventListener('change', update));
                    update();
                }

                setupVisibilityToggle('senderType', 'senderCompanyDiv');
                setupVisibilityToggle('receiverType', 'receiverCompanyDiv');

                // Weight Limit
                const weightInput = document.getElementById('weightInput');
                if (weightInput) {
                    weightInput.addEventListener('change', function () {
                        if (parseFloat(this.value) > 30) {
                            document.getElementById('weightModal').style.display = 'flex';
                            this.value = 30;
                        }
                    });
                }

                /* ===== PAIEMENT SUMUP ===== */
                const btnPay = document.getElementById("btnPay");
                btnPay.onclick = async () => {
                    const form = document.getElementById("chronoForm");
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData.entries());

                    // Validation minimale
                    if (!data.receiverLastname || !data.receiverFirstname || !data.receiverEmail || !data.receiverCountry) {
                        alert("Veuillez remplir les informations obligatoires du destinataire (Pays, Nom, Prénom, Email).");
                        return;
                    }

                    // On sauvegarde les données pour les retrouver au retour du paiement
                    if (data.shippingDate_input) {
                        const parts = data.shippingDate_input.split('-');
                        if (parts.length === 3) {
                            const [y, m, d] = parts;
                            data.shippingDate = `${d}/${m}/${y}`;
                        }
                    }
                    delete data.shippingDate_input;

                    localStorage.setItem('chronoData', JSON.stringify(data));

                    const statusDiv = document.getElementById('statusMessage');
                    statusDiv.innerHTML = "Préparation du paiement...";
                    statusDiv.className = "";

                    try {
                        const API_BASE_PAY = "https://generate-docs-production.up.railway.app";
                        const res = await fetch(`${API_BASE_PAY}/create-payment?product_name=chrono-express`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                type_pdf: "chrono-express",
                                ...data
                            })
                        });

                        if (!res.ok) {
                            const err = await res.json();
                            throw new Error(err.detail || "Erreur lors de la création du paiement");
                        }

                        const result = await res.json();
                        if (result.payment_url) {
                            window.location.href = result.payment_url;
                        } else {
                            throw new Error("Pas d'URL de paiement reçue");
                        }
                    } catch (err) {
                        statusDiv.textContent = "Erreur Paiement: " + err.message;
                        statusDiv.className = "error-message";
                    }
                };
            } catch (err) {
                console.error(err);
            }
        });

        function initCountrySelector() {
            const select = document.querySelector('select[name="receiverCountry"]');
            if (!select) return;

            // Create Wrapper
            const wrapper = document.createElement('div');
            wrapper.className = 'country-wrapper';
            select.parentNode.insertBefore(wrapper, select);
            wrapper.appendChild(select);

            // Hide original select
            select.style.display = 'none';

            // Create Input
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'country-input'; // Will pick up generic input styles if they exist
            input.placeholder = "Rechercher un pays...";
            input.autocomplete = "off";
            wrapper.insertBefore(input, select);

            // Create List container
            const list = document.createElement('div');
            list.className = 'country-list';
            wrapper.appendChild(list);

            // Parse Options
            const options = Array.from(select.options).map(opt => ({
                text: opt.text,
                value: opt.value
            })).filter(o => o.value); // Exclude placeholder

            function renderList(filter = "") {
                list.innerHTML = '';
                const filtered = options.filter(o => o.text.toUpperCase().includes(filter.toUpperCase()));

                if (filtered.length === 0) {
                    const noRes = document.createElement('div');
                    noRes.className = 'country-option';
                    noRes.textContent = "Aucun résultat";
                    list.appendChild(noRes);
                    return;
                }

                filtered.forEach(opt => {
                    const div = document.createElement('div');
                    div.className = 'country-option';
                    div.textContent = opt.text;
                    div.dataset.value = opt.value;
                    div.onclick = () => {
                        input.value = opt.text;
                        select.value = opt.value;
                        list.style.display = 'none';
                        // Trigger change event manually if needed
                        if (typeof updateDestCountry === 'function') updateDestCountry(select);
                    };
                    list.appendChild(div);
                });
            }

            // Events
            input.addEventListener('focus', () => {
                renderList(input.value);
                list.style.display = 'block';
            });

            input.addEventListener('input', () => {
                renderList(input.value);
                list.style.display = 'block';
            });

            // Click outside to close
            document.addEventListener('click', (e) => {
                if (!wrapper.contains(e.target)) {
                    list.style.display = 'none';
                    // Revert to selected value if invalid? Or clear?
                    // Optional: Validation logic. For now, trust user.
                }
            });
        }

        function closeWeightModal() {
            document.getElementById('weightModal').style.display = 'none';
        }

        function updateDestCountry(select) {
            // Updated directly by custom selector
            // Logic handled there
        }

        async function handleSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            if (data.shippingDate_input) {
                const parts = data.shippingDate_input.split('-');
                if (parts.length === 3) {
                    const [y, m, d] = parts;
                    data.shippingDate = `${d}/${m}/${y}`;
                }
            }
            delete data.shippingDate_input;

            // Mark as preview for the free version
            data.preview = true;

            performGeneration(data);
        }

        async function performGeneration(data) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.innerHTML = '';
            statusDiv.className = '';

            const overlay = document.getElementById('overlay');
            if (overlay) overlay.style.visibility = 'visible';

            const btn = document.getElementById('btn-validate');
            const timerContainer = document.getElementById('timerContainer');
            const timerSpan = document.getElementById('timer');

            if (btn) btn.disabled = true;
            if (btn) btn.textContent = "Génération en cours...";

            timerContainer.style.display = 'block';
            let seconds = 0;
            timerSpan.textContent = "00:00";

            let timerInterval = setInterval(() => {
                seconds++;
                const m = Math.floor(seconds / 60).toString().padStart(2, '0');
                const s = (seconds % 60).toString().padStart(2, '0');
                timerSpan.textContent = `${m}:${s}`;
            }, 1000);

            try {
                const response = await fetch('https://chronopost.up.railway.app/generate-chronopost/generate-chronopost', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ data: data })
                });

                const result = await response.json();

                if (response.ok && result.status === 'success') {
                    statusDiv.textContent = "Génération réussie ! Le bordereau a été envoyé par mail.";
                    statusDiv.className = "success-message";

                    // Handle Proforma PDF Download (if any)
                    if (result.proforma) {
                        try {
                            const byteCharacters = atob(result.proforma);
                            const byteNumbers = new Array(byteCharacters.length);
                            for (let i = 0; i < byteCharacters.length; i++) {
                                byteNumbers[i] = byteCharacters.charCodeAt(i);
                            }
                            const byteArray = new Uint8Array(byteNumbers);
                            const blob = new Blob([byteArray], { type: "application/pdf" });
                            const link = document.createElement('a');
                            link.href = window.URL.createObjectURL(blob);
                            link.download = "facture_proforma.pdf";
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                        } catch (e) {
                            console.error("Download Error", e);
                            statusDiv.textContent += " (Erreur téléchargement Proforma)";
                        }
                    }

                } else {
                    throw new Error(result.message || "Erreur inconnue");
                }
            } catch (error) {
                console.error(error);
                statusDiv.textContent = "Erreur: " + error.message;
                statusDiv.className = "error-message";
            } finally {
                if (overlay) overlay.style.visibility = 'hidden';
                if (timerInterval) clearInterval(timerInterval);
                if (timerContainer) timerContainer.style.display = 'none';
                if (btn) {
                    btn.disabled = false;
                    btn.textContent = "Générer Preview (Gratuit)";
                }
            }
        }
    </script>
    <!-- Country Eligibility Modal -->
    <div id="countryModal" class="country-modal" style="display:none;">
        <div class="country-modal-content">
            <span class="close-country-modal" onclick="closeCountryModalList()">X</span>
            <h3>Pays Éligibles (2026)</h3>
            <div class="search-modal-box">
                <input type="text" id="modalSearch" placeholder="Rechercher un pays..." onkeyup="filterCountryList()">
            </div>
            <ul class="country-zone-list" id="countryZoneList">
                <li>AFRIQUE DU SUD <span class="zone-badge">zone 6</span></li>
                <li>ALBANIE <span class="zone-badge">zone 4</span></li>
                <li>ALGÉRIE <span class="zone-badge">zone 6</span></li>
                <li>ALLEMAGNE <span class="zone-badge">zone 1</span></li>
                <li>ANDORRE <span class="zone-badge">zone 4</span></li>
                <li>ANGOLA <span class="zone-badge">zone 6</span></li>
                <li>ANGUILLA <span class="zone-badge">zone 5</span></li>
                <li>ANTIGUA-ET-BARBUDA <span class="zone-badge">zone 5</span></li>
                <li>ANTILLES NÉERLANDAISES (SAUF SAINT-MARTIN) <span class="zone-badge">zone 5</span></li>
                <li>ARABIE SAOUDITE <span class="zone-badge">zone 6</span></li>
                <li>ARGENTINE <span class="zone-badge">zone 5</span></li>
                <li>ARMÉNIE <span class="zone-badge">zone 4</span></li>
                <li>ARUBA <span class="zone-badge">zone 5</span></li>
                <li>AUSTRALIE <span class="zone-badge">zone 7</span></li>
                <li>AUTRICHE <span class="zone-badge">zone 2</span></li>
                <li>AZERBAÏDJAN <span class="zone-badge">zone 6</span></li>
                <li>BAHAMAS <span class="zone-badge">zone 5</span></li>
                <li>BAHREÏN <span class="zone-badge">zone 6</span></li>
                <li>BANGLADESH <span class="zone-badge">zone 7</span></li>
                <li>BARBADE <span class="zone-badge">zone 5</span></li>
                <li>BELGIQUE <span class="zone-badge">zone 1</span></li>
                <li>BELIZE <span class="zone-badge">zone 5</span></li>
                <li>BENIN <span class="zone-badge">zone 6</span></li>
                <li>BERMUDES <span class="zone-badge">zone 5</span></li>
                <li>BHOUTAN <span class="zone-badge">zone 7</span></li>
                <li>BOLIVIE <span class="zone-badge">zone 5</span></li>
                <li>BOSNIE-HERZÉGOVINE <span class="zone-badge">zone 4</span></li>
                <li>BOTSWANA <span class="zone-badge">zone 6</span></li>
                <li>BRESIL <span class="zone-badge">zone 5</span></li>
                <li>BRUNÉI DARUSSALAM <span class="zone-badge">zone 7</span></li>
                <li>BULGARIE <span class="zone-badge">zone 3</span></li>
                <li>BURKINA FASO <span class="zone-badge">zone 6</span></li>
                <li>BURUNDI <span class="zone-badge">zone 6</span></li>
                <li>CAMBODGE <span class="zone-badge">zone 7</span></li>
                <li>CAMEROUN <span class="zone-badge">zone 6</span></li>
                <li>CANADA <span class="zone-badge">zone 5</span></li>
                <li>CANARIES (ÎLES DES) <span class="zone-badge">zone 4</span></li>
                <li>CAP-VERT <span class="zone-badge">zone 6</span></li>
                <li>CAYMAN (ÎLES) <span class="zone-badge">zone 5</span></li>
                <li>CENTRAFRICAINE (RÉPUBLIQUE) <span class="zone-badge">zone 6</span></li>
                <li>CHILI <span class="zone-badge">zone 5</span></li>
                <li>CHINE <span class="zone-badge">zone 7</span></li>
                <li>CHRISTMAS (ÎLES) <span class="zone-badge">zone 7</span></li>
                <li>CHYPRE <span class="zone-badge">zone 3</span></li>
                <li>COCOS (KEELING) (ÎLES) <span class="zone-badge">zone 7</span></li>
                <li>COLOMBIE <span class="zone-badge">zone 5</span></li>
                <li>COMORES <span class="zone-badge">zone 6</span></li>
                <li>CONGO (RÉPUBLIQUE DÉMOCRATIQUE DU) <span class="zone-badge">zone 6</span></li>
                <li>CONGO . <span class="zone-badge">zone 6</span></li>
                <li>COOK (ÎLES) <span class="zone-badge">zone 7</span></li>
                <li>CORÉE DU SUD <span class="zone-badge">zone 7</span></li>
                <li>COSTA RICA <span class="zone-badge">zone 5</span></li>
                <li>COTE D'IVOIRE <span class="zone-badge">zone 6</span></li>
                <li>CROATIE <span class="zone-badge">zone 3</span></li>
                <li>DANEMARK <span class="zone-badge">zone 2</span></li>
                <li>DJIBOUTI <span class="zone-badge">zone 6</span></li>
                <li>DOMINICAINE (RÉPUBLIQUE) <span class="zone-badge">zone 5</span></li>
                <li>DOMINIQUE <span class="zone-badge">zone 5</span></li>
                <li>EGYPTE <span class="zone-badge">zone 6</span></li>
                <li>EL SALVADOR <span class="zone-badge">zone 5</span></li>
                <li>EMIRATS ARABES UNIS <span class="zone-badge">zone 6</span></li>
                <li>EQUATEUR <span class="zone-badge">zone 5</span></li>
                <li>ERYTHRÉE <span class="zone-badge">zone 6</span></li>
                <li>ESPAGNE <span class="zone-badge">zone 2</span></li>
                <li>ESTONIE <span class="zone-badge">zone 3</span></li>
                <li>ETATS-UNIS D'AMÉRIQUE <span class="zone-badge">zone 5</span></li>
                <li>ETHIOPIE <span class="zone-badge">zone 6</span></li>
                <li>FEROÉ (ÎLES) <span class="zone-badge">zone 4</span></li>
                <li>FIDJI <span class="zone-badge">zone 7</span></li>
                <li>FINLANDE <span class="zone-badge">zone 2</span></li>
                <li>GABON <span class="zone-badge">zone 6</span></li>
                <li>GAMBIE <span class="zone-badge">zone 6</span></li>
                <li>GEORGIE <span class="zone-badge">zone 4</span></li>
                <li>GHANA <span class="zone-badge">zone 6</span></li>
                <li>GIBRALTAR <span class="zone-badge">zone 4</span></li>
                <li>GRANDE-BRETAGNE ET IRLANDE DU NORD <span class="zone-badge">zone 2</span></li>
                <li>GRECE <span class="zone-badge">zone 2</span></li>
                <li>GRENADE <span class="zone-badge">zone 5</span></li>
                <li>GROENLAND <span class="zone-badge">zone 5</span></li>
                <li>GUADELOUPE <span class="zone-badge">zone 8</span></li>
                <li>GUAM <span class="zone-badge">zone 7</span></li>
                <li>GUATEMALA <span class="zone-badge">zone 5</span></li>
                <li>GUERNESEY <span class="zone-badge">zone 4</span></li>
                <li>GUINÉE . <span class="zone-badge">zone 6</span></li>
                <li>GUINÉE ÉQUATORIALE <span class="zone-badge">zone 6</span></li>
                <li>GUINÉE-BISSAU <span class="zone-badge">zone 6</span></li>
                <li>GUYANA <span class="zone-badge">zone 5</span></li>
                <li>GUYANE <span class="zone-badge">zone 9</span></li>
                <li>HAÏTI <span class="zone-badge">zone 5</span></li>
                <li>HONDURAS <span class="zone-badge">zone 5</span></li>
                <li>HONG-KONG <span class="zone-badge">zone 7</span></li>
                <li>HONGRIE <span class="zone-badge">zone 3</span></li>
                <li>INDE <span class="zone-badge">zone 7</span></li>
                <li>INDONÉSIE <span class="zone-badge">zone 7</span></li>
                <li>IRAK <span class="zone-badge">zone 6</span></li>
                <li>IRLANDE <span class="zone-badge">zone 2</span></li>
                <li>ISLANDE <span class="zone-badge">zone 4</span></li>
                <li>ISRAËL <span class="zone-badge">zone 6</span></li>
                <li>ITALIE <span class="zone-badge">zone 2</span></li>
                <li>JAMAÏQUE <span class="zone-badge">zone 5</span></li>
                <li>JAPON <span class="zone-badge">zone 7</span></li>
                <li>JERSEY <span class="zone-badge">zone 4</span></li>
                <li>JORDANIE <span class="zone-badge">zone 6</span></li>
                <li>KAZAKHSTAN <span class="zone-badge">zone 7</span></li>
                <li>KENYA <span class="zone-badge">zone 6</span></li>
                <li>KIRGHIZISTAN <span class="zone-badge">zone 7</span></li>
                <li>KIRIBATI <span class="zone-badge">zone 7</span></li>
                <li>KOWEÏT <span class="zone-badge">zone 6</span></li>
                <li>LAOS <span class="zone-badge">zone 7</span></li>
                <li>LESOTHO <span class="zone-badge">zone 6</span></li>
                <li>LETTONIE <span class="zone-badge">zone 3</span></li>
                <li>LIBAN <span class="zone-badge">zone 6</span></li>
                <li>LIBERIA <span class="zone-badge">zone 6</span></li>
                <li>LIBYE <span class="zone-badge">zone 6</span></li>
                <li>LIECHTENSTEIN <span class="zone-badge">zone 4</span></li>
                <li>LITUANIE <span class="zone-badge">zone 3</span></li>
                <li>LUXEMBOURG <span class="zone-badge">zone 1</span></li>
                <li>MACAO <span class="zone-badge">zone 7</span></li>
                <li>MACÉDOINE <span class="zone-badge">zone 4</span></li>
                <li>MADAGASCAR <span class="zone-badge">zone 6</span></li>
                <li>MALAISIE <span class="zone-badge">zone 7</span></li>
                <li>MALAWI <span class="zone-badge">zone 6</span></li>
                <li>MALDIVES <span class="zone-badge">zone 7</span></li>
                <li>MALI <span class="zone-badge">zone 6</span></li>
                <li>MALTE <span class="zone-badge">zone 3</span></li>
                <li>MARIANNES DU NORD (ÎLES) <span class="zone-badge">zone 9</span></li>
                <li>MAROC <span class="zone-badge">zone 6</span></li>
                <li>MARSHALL (ÎLES) <span class="zone-badge">zone 7</span></li>
                <li>MARTINIQUE <span class="zone-badge">zone 8</span></li>
                <li>MAURICE <span class="zone-badge">zone 6</span></li>
                <li>MAURITANIE <span class="zone-badge">zone 6</span></li>
                <li>MAYOTTE <span class="zone-badge">zone 9</span></li>
                <li>MEXIQUE <span class="zone-badge">zone 5</span></li>
                <li>MICRONÉSIE (ÎLES CAROLINES) <span class="zone-badge">zone 7</span></li>
                <li>MOLDAVIE <span class="zone-badge">zone 4</span></li>
                <li>MONGOLIE <span class="zone-badge">zone 7</span></li>
                <li>MONTSERRAT <span class="zone-badge">zone 5</span></li>
                <li>MONTÉNÉGRO <span class="zone-badge">zone 4</span></li>
                <li>MOZAMBIQUE <span class="zone-badge">zone 6</span></li>
                <li>NAMIBIE <span class="zone-badge">zone 6</span></li>
                <li>NAURU <span class="zone-badge">zone 7</span></li>
                <li>NEPAL <span class="zone-badge">zone 7</span></li>
                <li>NICARAGUA <span class="zone-badge">zone 5</span></li>
                <li>NIGER <span class="zone-badge">zone 6</span></li>
                <li>NIGÉRIA <span class="zone-badge">zone 6</span></li>
                <li>NORFOLK (ÎLE) <span class="zone-badge">zone 7</span></li>
                <li>NORVÈGE <span class="zone-badge">zone 4</span></li>
                <li>NOUVELLE-CALÉDONIE <span class="zone-badge">zone 9</span></li>
                <li>NOUVELLE-ZÉLANDE <span class="zone-badge">zone 7</span></li>
                <li>OMAN (SULTANAT D') <span class="zone-badge">zone 6</span></li>
                <li>OUGANDA <span class="zone-badge">zone 6</span></li>
                <li>OUZBÉKISTAN <span class="zone-badge">zone 7</span></li>
                <li>PAKISTAN <span class="zone-badge">zone 7</span></li>
                <li>PALAU <span class="zone-badge">zone 7</span></li>
                <li>PALESTINE <span class="zone-badge">zone 6</span></li>
                <li>PANAMA <span class="zone-badge">zone 5</span></li>
                <li>PAPOUASIE-NOUVELLE-GUINÉE <span class="zone-badge">zone 7</span></li>
                <li>PARAGUAY <span class="zone-badge">zone 5</span></li>
                <li>PAYS-BAS <span class="zone-badge">zone 1</span></li>
                <li>PEROU <span class="zone-badge">zone 5</span></li>
                <li>PHILIPPINES <span class="zone-badge">zone 7</span></li>
                <li>POLOGNE <span class="zone-badge">zone 3</span></li>
                <li>POLYNÉSIE FRANÇAISE <span class="zone-badge">zone 9</span></li>
                <li>PORTO RICO <span class="zone-badge">zone 5</span></li>
                <li>PORTUGAL <span class="zone-badge">zone 2</span></li>
                <li>QATAR <span class="zone-badge">zone 6</span></li>
                <li>REUNION <span class="zone-badge">zone 8</span></li>
                <li>ROUMANIE <span class="zone-badge">zone 3</span></li>
                <li>RWANDA <span class="zone-badge">zone 6</span></li>
                <li>SAINT-BARTHÉLEMY <span class="zone-badge">zone 8</span></li>
                <li>SAINT-CHRISTOPHE ET NÉVIS <span class="zone-badge">zone 5</span></li>
                <li>SAINT-MARTIN - PARTIE FRANÇAISE <span class="zone-badge">zone 8</span></li>
                <li>SAINT-MARTIN - PARTIE NÉERLANDAISE <span class="zone-badge">zone 8</span></li>
                <li>SAINT-PIERRE-ET-MIQUELON <span class="zone-badge">zone 9</span></li>
                <li>SAINT-VINCENT-ET-LES GRENADINES <span class="zone-badge">zone 5</span></li>
                <li>SAINTE-LUCIE <span class="zone-badge">zone 5</span></li>
                <li>SALOMON <span class="zone-badge">zone 7</span></li>
                <li>SAMOA AMÉRICAINES (ÎLES) <span class="zone-badge">zone 7</span></li>
                <li>SAMOA OCCIDENTALES <span class="zone-badge">zone 7</span></li>
                <li>SAN MARIN <span class="zone-badge">zone 4</span></li>
                <li>SAO TOMÉ-ET-PRINCIPE <span class="zone-badge">zone 6</span></li>
                <li>SENÉGAL <span class="zone-badge">zone 6</span></li>
                <li>SERBIE / KOSOVO <span class="zone-badge">zone 4</span></li>
                <li>SEYCHELLES <span class="zone-badge">zone 6</span></li>
                <li>SIERRA LEONE <span class="zone-badge">zone 6</span></li>
                <li>SINGAPOUR <span class="zone-badge">zone 7</span></li>
                <li>SLOVAQUIE <span class="zone-badge">zone 3</span></li>
                <li>SLOVÉNIE <span class="zone-badge">zone 3</span></li>
                <li>SOMALIE <span class="zone-badge">zone 6</span></li>
                <li>SRI LANKA <span class="zone-badge">zone 7</span></li>
                <li>SUEDE <span class="zone-badge">zone 2</span></li>
                <li>SUISSE <span class="zone-badge">zone 4</span></li>
                <li>SURINAM <span class="zone-badge">zone 5</span></li>
                <li>SWAZILAND <span class="zone-badge">zone 6</span></li>
                <li>TAIWAN <span class="zone-badge">zone 7</span></li>
                <li>TANZANIE <span class="zone-badge">zone 6</span></li>
                <li>TCHAD <span class="zone-badge">zone 6</span></li>
                <li>TCHÈQUE (RÉPUBLIQUE) <span class="zone-badge">zone 3</span></li>
                <li>THAÏLANDE <span class="zone-badge">zone 7</span></li>
                <li>TIMOR ORIENTAL <span class="zone-badge">zone 7</span></li>
                <li>TOGO <span class="zone-badge">zone 6</span></li>
                <li>TONGA <span class="zone-badge">zone 7</span></li>
                <li>TRINITÉ-ET-TOBAGO <span class="zone-badge">zone 5</span></li>
                <li>TUNISIE <span class="zone-badge">zone 6</span></li>
                <li>TURQUES ET CAIQUES <span class="zone-badge">zone 5</span></li>
                <li>TURQUIE <span class="zone-badge">zone 4</span></li>
                <li>TUVALU <span class="zone-badge">zone 7</span></li>
                <li>URUGUAY <span class="zone-badge">zone 5</span></li>
                <li>VANUATU <span class="zone-badge">zone 7</span></li>
                <li>VATICAN <span class="zone-badge">zone 4</span></li>
                <li>VIERGES AMÉRICAINES (ÎLES) <span class="zone-badge">zone 5</span></li>
                <li>VIERGES BRITANNIQUES (ÎLES) <span class="zone-badge">zone 5</span></li>
                <li>VIET NAM <span class="zone-badge">zone 7</span></li>
                <li>WALLIS ET FUTUNA <span class="zone-badge">zone 9</span></li>
                <li>ZAMBIE <span class="zone-badge">zone 6</span></li>
                <li>ZIMBABWE <span class="zone-badge">zone 6</span></li>
            </ul>
        </div>
    </div>
    <style>
        .country-eligible-btn {
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            color: #fff;
            text-decoration: underline;
        }

        .country-eligible-btn:hover {
            text-decoration: none;
            opacity: 0.9;
        }

        .country-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2005;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .country-modal-content {
            background: #2b2b2b;
            padding: 20px;
            border: 1px solid #444;
            width: 350px;
            max-height: 80vh;
            overflow-y: hidden;
            /* Scroll inside list */
            display: flex;
            flex-direction: column;
            position: relative;
            color: #fff;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }

        .close-country-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-weight: bold;
            background: #444;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .close-country-modal:hover {
            background: #555;
        }

        .country-modal-content h3 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-align: center;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }

        .search-modal-box {
            margin-bottom: 10px;
        }

        .search-modal-box input {
            width: 100%;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #555;
            background: #333;
            color: #fff;
        }

        .country-zone-list {
            list-style: none;
            padding: 0;
            margin: 0;
            overflow-y: auto;
            flex: 1;
            padding-right: 5px;
        }

        /* Custom Scrollbar */
        .country-zone-list::-webkit-scrollbar {
            width: 8px;
        }

        .country-zone-list::-webkit-scrollbar-track {
            background: #222;
        }

        .country-zone-list::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        .country-zone-list::-webkit-scrollbar-thumb:hover {
            background: #007bff;
        }

        .country-zone-list li {
            padding: 8px 5px;
            border-bottom: 1px solid #3d3d3d;
            font-size: 0.85rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .country-zone-list li:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .zone-badge {
            background: #007bff;
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
        }
    </style>
    <script>
        function openCountryModal() {
            document.getElementById('countryModal').style.display = 'flex';
            document.getElementById('modalSearch').focus();
        }
        function closeCountryModalList() {
            document.getElementById('countryModal').style.display = 'none';
        }
        // Close on click outside
        document.getElementById('countryModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeCountryModalList();
            }
        });

        function filterCountryList() {
            const input = document.getElementById('modalSearch');
            const filter = input.value.toUpperCase();
            const ul = document.getElementById('countryZoneList');
            const li = ul.getElementsByTagName('li');

            for (let i = 0; i < li.length; i++) {
                const txtValue = li[i].textContent || li[i].innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.display = "none";
                }
            }
        }
    </script>
</body>

</html>