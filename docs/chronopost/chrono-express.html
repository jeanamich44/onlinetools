<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Chrono Express - Générer Bordereau</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>

    <div id="overlay" style="flex-direction: column; gap: 20px;">
        <div class="spinner"></div>
        <div id="timerContainer" style="display:none; text-align: center; color: #fff;">
            <span style="font-size: 1.2rem; font-weight: bold;" id="timer">00:00</span>
            <span class="info-icon" style="margin-left: 10px; vertical-align: middle;"
                data-tooltip="Generation in progress...">i</span>
        </div>
    </div>


    <div id="weightModal" class="modal-overlay" style="display:none;">
        <div class="modal-box blue-theme">
            <h3>Warning - Weight Exceeds 30kg</h3>
            <p>For any shipment over 30kg, please contact the manager.</p>
            <a href="https://t.me/RheyyFonda" target="_blank" class="contact-btn">Contact Support (Telegram)</a>
            <button onclick="closeWeightModal()" class="close-btn">Close</button>
        </div>
    </div>

    <div id="statusMessage" style="position:fixed; top:80px; width:100%; text-align:center; z-index:900;"></div>

    <header class="header">
        <div class="header-inner">
            <a href="../index.html" class="logo">OnlineTools</a>
            <nav class="nav">
                <a href="../index.html">Home</a>
                <a href="../tools/tools-liste.html">Tools</a>
                <a href="../contact.html">Contact</a>

            </nav>
        </div>
    </header>

    <main class="content form-container">

        <h1 class="page-title">Chrono Express - International</h1>

        <form id="chronoForm" onsubmit="handleSubmit(event)">

            <input type="hidden" name="valeurproduct" value="monde">

            <div class="sections-grid">

                <div class="form-section">
                    <div class="section-header">
                        <span>
                            <span class="section-number">1</span> Sender
                            <span class="info-icon"
                                data-tooltip="If left empty, unique random coordinates will be used.">i</span>
                        </span>
                        <span>FRANCE</span>
                    </div>
                    <div class="section-content">
                        <div class="radio-group" style="margin-bottom: 20px;">
                            <label>Type *</label>
                            <label><input type="radio" name="senderType" value="0"> Professional</label>
                            <label><input type="radio" name="senderType" value="1" checked> Individual</label>
                        </div>

                        <div class="form-row">
                            <div class="form-group" id="senderCompanyDiv" style="display:none;">
                                <label>Company Name</label>
                                <input type="text" name="senderCompanyName" maxlength="60">
                            </div>
                            <input type="hidden" name="senderCountry" value="FR">
                            <div class="form-group">
                                <label>Last Name</label>
                                <input type="text" name="senderLastname" placeholder="Empty = Random" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>First Name</label>
                                <input type="text" name="senderFirstname" placeholder="Empty = Random" maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Postal Code</label>
                                <input type="text" name="senderCP" pattern="\d+" placeholder="Empty = Random"
                                    maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" name="senderHandphone" minlength="8" placeholder="Empty = Random"
                                    value="" maxlength="14">
                            </div>
                            <div class="form-group">
                                <label>City</label>
                                <input type="text" name="senderCity" placeholder="Empty = Random" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" name="senderEmail" placeholder="Empty = Random" maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Address</label>
                                <input type="text" name="senderAddress" placeholder="Empty = Random" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Address Detail</label>
                                <input type="text" name="senderAddress2" maxlength="20">
                            </div>
                            <div class="form-group">
                                <label>Sender Reference</label>
                                <input type="text" name="senderRef" maxlength="14">
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <label><input type="checkbox" name="exp_save"> Save this sender for my next
                                shipments</label>
                        </div>
                    </div>
                </div>


                <div class="form-section">
                    <div class="section-header">
                        <span><span class="section-number">2</span> Receiver</span>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="country-eligible-btn" onclick="openCountryModal()">
                                Eligible country(ies) <span class="info-icon"
                                    style="background: #fff; color: #007bff; font-weight: bold; border-radius: 50%; padding: 0 6px;">?</span>
                            </span>
                            <span id="destCountryDisplay">INTERNATIONAL</span>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="radio-group" style="margin-bottom: 20px;">
                            <label>Type *</label>
                            <label><input type="radio" name="receiverType" value="0"> Professional</label>
                            <label><input type="radio" name="receiverType" value="1" checked> Individual</label>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Country *</label>
                                <select name="receiverCountry" required onchange="updateDestCountry(this)">
                                    <option value="">Choose a country...</option>
                                    <option value="AF">AFGHANISTAN</option>
                                    <option value="ZA">SOUTH AFRICA</option>
                                    <option value="AL">ALBANIA</option>
                                    <option value="DZ">ALGERIA</option>
                                    <option value="DE">GERMANY</option>
                                    <option value="AD">ANDORRA</option>
                                    <option value="AO">ANGOLA</option>
                                    <option value="AI">ANGUILLA</option>
                                    <option value="AQ">ANTARCTICA</option>
                                    <option value="AG">ANTIGUA AND BARBUDA</option>
                                    <option value="SA">SAUDI ARABIA</option>
                                    <option value="AR">ARGENTINA</option>
                                    <option value="AM">ARMENIA</option>
                                    <option value="AW">ARUBA</option>
                                    <option value="AU">AUSTRALIA</option>
                                    <option value="AT">AUSTRIA</option>
                                    <option value="AZ">AZERBAIJAN</option>
                                    <option value="BS">BAHAMAS</option>
                                    <option value="BH">BAHRAIN</option>
                                    <option value="BD">BANGLADESH</option>
                                    <option value="BB">BARBADOS</option>
                                    <option value="BE">BELGIUM</option>
                                    <option value="BZ">BELIZE</option>
                                    <option value="BJ">BENIN</option>
                                    <option value="BM">BERMUDA</option>
                                    <option value="BT">BHUTAN</option>
                                    <option value="BY">BELARUS</option>
                                    <option value="BO">BOLIVIA</option>
                                    <option value="BA">BOSNIA AND HERZEGOVINA</option>
                                    <option value="BW">BOTSWANA</option>
                                    <option value="BR">BRAZIL</option>
                                    <option value="BN">BRUNEI DARUSSALAM</option>
                                    <option value="BG">BULGARIA</option>
                                    <option value="BF">BURKINA FASO</option>
                                    <option value="BI">BURUNDI</option>
                                    <option value="KH">CAMBODIA</option>
                                    <option value="CM">CAMEROON</option>
                                    <option value="CA">CANADA</option>
                                    <option value="CV">CAPE VERDE</option>
                                    <option value="CL">CHILE</option>
                                    <option value="CN">CHINA</option>
                                    <option value="CY">CYPRUS</option>
                                    <option value="CO">COLOMBIA</option>
                                    <option value="KM">COMOROS</option>
                                    <option value="CG">CONGO</option>
                                    <option value="CD">CONGO (DEM. REP.)</option>
                                    <option value="KR">SOUTH KOREA</option>
                                    <option value="KP">NORTH KOREA</option>
                                    <option value="CR">COSTA RICA</option>
                                    <option value="CI">IVORY COAST</option>
                                    <option value="HR">CROATIA</option>
                                    <option value="CU">CUBA</option>
                                    <option value="DK">DENMARK</option>
                                    <option value="DJ">DJIBOUTI</option>
                                    <option value="DM">DOMINICA</option>
                                    <option value="EG">EGYPT</option>
                                    <option value="AE">UNITED ARAB EMIRATES</option>
                                    <option value="EC">ECUADOR</option>
                                    <option value="ER">ERITREA</option>
                                    <option value="ES">SPAIN</option>
                                    <option value="EE">ESTONIA</option>
                                    <option value="US">UNITED STATES</option>
                                    <option value="ET">ETHIOPIA</option>
                                    <option value="FJ">FIJI</option>
                                    <option value="FI">FINLAND</option>
                                    <option value="FR">FRANCE</option>
                                    <option value="GA">GABON</option>
                                    <option value="GM">GAMBIA</option>
                                    <option value="GE">GEORGIA</option>
                                    <option value="GH">GHANA</option>
                                    <option value="GI">GIBRALTAR</option>
                                    <option value="GR">GREECE</option>
                                    <option value="GD">GRENADE</option>
                                    <option value="GL">GREENLAND</option>
                                    <option value="GP">GUADELOUPE</option>
                                    <option value="GU">GUAM</option>
                                    <option value="GT">GUATEMALA</option>
                                    <option value="GG">GUERNSEY</option>
                                    <option value="GN">GUINEA</option>
                                    <option value="GW">GUINEA-BISSAU</option>
                                    <option value="GQ">EQUATORIAL GUINEA</option>
                                    <option value="GY">GUYANA</option>
                                    <option value="GF">FRENCH GUIANA</option>
                                    <option value="HT">HAITI</option>
                                    <option value="HN">HONDURAS</option>
                                    <option value="HK">HONG KONG</option>
                                    <option value="HU">HUNGARY</option>
                                    <option value="IM">ISLE OF MAN</option>
                                    <option value="IN">INDIA</option>
                                    <option value="ID">INDONESIA</option>
                                    <option value="IQ">IRAQ</option>
                                    <option value="IR">IRAN</option>
                                    <option value="IE">IRELAND</option>
                                    <option value="IS">ICELAND</option>
                                    <option value="IL">ISRAEL</option>
                                    <option value="IT">ITALY</option>
                                    <option value="JM">JAMAICA</option>
                                    <option value="JP">JAPAN</option>
                                    <option value="JE">JERSEY</option>
                                    <option value="JO">JORDAN</option>
                                    <option value="KZ">KAZAKHSTAN</option>
                                    <option value="KE">KENYA</option>
                                    <option value="KG">KYRGYZSTAN</option>
                                    <option value="KI">KIRIBATI</option>
                                    <option value="KW">KUWAIT</option>
                                    <option value="LA">LAOS</option>
                                    <option value="LS">LESOTHO</option>
                                    <option value="LV">LATVIA</option>
                                    <option value="LB">LEBANON</option>
                                    <option value="LR">LIBERIA</option>
                                    <option value="LY">LIBYA</option>
                                    <option value="LI">LIECHTENSTEIN</option>
                                    <option value="LT">LITHUANIA</option>
                                    <option value="LU">LUXEMBOURG</option>
                                    <option value="MO">MACAU</option>
                                    <option value="MK">NORTH MACEDONIA</option>
                                    <option value="MG">MADAGASCAR</option>
                                    <option value="MY">MALAYSIA</option>
                                    <option value="MW">MALAWI</option>
                                    <option value="MV">MALDIVES</option>
                                    <option value="ML">MALI</option>
                                    <option value="MT">MALTA</option>
                                    <option value="MA">MOROCCO</option>
                                    <option value="MQ">MARTINIQUE</option>
                                    <option value="MU">MAURITIUS</option>
                                    <option value="MR">MAURITANIA</option>
                                    <option value="YT">MAYOTTE</option>
                                    <option value="MX">MEXICO</option>
                                    <option value="FM">MICRONESIA</option>
                                    <option value="MD">MOLDAVA</option>
                                    <option value="MC">MONACO</option>
                                    <option value="MN">MONGOLIA</option>
                                    <option value="ME">MONTENEGRO</option>
                                    <option value="MS">MONTSERRAT</option>
                                    <option value="MZ">MOZAMBIQUE</option>
                                    <option value="MM">MYANMAR (BURMA)</option>
                                    <option value="NA">NAMIBIA</option>
                                    <option value="NR">NAURU</option>
                                    <option value="NP">NEPAL</option>
                                    <option value="NI">NICARAGUA</option>
                                    <option value="NE">NIGER</option>
                                    <option value="NG">NIGERIA</option>
                                    <option value="NU">NIUE</option>
                                    <option value="NO">NORWAY</option>
                                    <option value="NC">NEW CALEDONIA</option>
                                    <option value="NZ">NEW ZEALAND</option>
                                    <option value="OM">OMAN</option>
                                    <option value="UG">UGANDA</option>
                                    <option value="UZ">UZBEKISTAN</option>
                                    <option value="PK">PAKISTAN</option>
                                    <option value="PW">PALAU</option>
                                    <option value="PS">PALESTINE</option>
                                    <option value="PA">PANAMA</option>
                                    <option value="PG">PAPUA NEW GUINEA</option>
                                    <option value="PY">PARAGUAY</option>
                                    <option value="NL">NETHERLANDS</option>
                                    <option value="PE">PERU</option>
                                    <option value="PH">PHILIPPINES</option>
                                    <option value="PL">POLAND</option>
                                    <option value="PF">FRENCH POLYNESIA</option>
                                    <option value="PR">PUERTO RICO</option>
                                    <option value="PT">PORTUGAL</option>
                                    <option value="QA">QATAR</option>
                                    <option value="RE">REUNION</option>
                                    <option value="RO">ROMANIA</option>
                                    <option value="GB">UNITED KINGDOM</option>
                                    <option value="RU">RUSSIA</option>
                                    <option value="RW">RWANDA</option>
                                    <option value="EH">WESTERN SAHARA</option>
                                    <option value="BL">SAINT BARTHELEMY</option>
                                    <option value="KN">SAINT KITTS AND NEVIS</option>
                                    <option value="SM">SAN MARINO</option>
                                    <option value="MF">SAINT MARTIN</option>
                                    <option value="PM">SAINT PIERRE AND MIQUELON</option>
                                    <option value="VC">SAINT VINCENT AND THE GRENADINES</option>
                                    <option value="LC">SAINT LUCIA</option>
                                    <option value="SB">SOLOMON ISLANDS</option>
                                    <option value="WS">SAMOA</option>
                                    <option value="AS">AMERICAN SAMOA</option>
                                    <option value="ST">SAO TOME AND PRINCIPE</option>
                                    <option value="SN">SENEGAL</option>
                                    <option value="RS">SERBIA</option>
                                    <option value="SC">SEYCHELLES</option>
                                    <option value="SL">SIERRA LEONE</option>
                                    <option value="SG">SINGAPORE</option>
                                    <option value="SK">SLOVAKIA</option>
                                    <option value="SI">SLOVENIA</option>
                                    <option value="SO">SOMALIA</option>
                                    <option value="SD">SUDAN</option>
                                    <option value="LK">SRI LANKA</option>
                                    <option value="SE">SWEDEN</option>
                                    <option value="CH">SWITZERLAND</option>
                                    <option value="SR">SURINAME</option>
                                    <option value="SY">SYRIA</option>
                                    <option value="TJ">TAJIKISTAN</option>
                                    <option value="TW">TAIWAN</option>
                                    <option value="TZ">TANZANIA</option>
                                    <option value="TD">CHAD</option>
                                    <option value="CZ">CZECHIA</option>
                                    <option value="TF">FRENCH SOUTHERN TERRITORIES</option>
                                    <option value="TH">THAILAND</option>
                                    <option value="TL">TIMOR-LESTE</option>
                                    <option value="TG">TOGO</option>
                                    <option value="TK">TOKELAU</option>
                                    <option value="TO">TONGA</option>
                                    <option value="TT">TRINIDAD AND TOBAGO</option>
                                    <option value="TN">TUNISIA</option>
                                    <option value="TM">TURKMENISTAN</option>
                                    <option value="TR">TURKEY</option>
                                    <option value="TV">TUVALU</option>
                                    <option value="UA">UKRAINE</option>
                                    <option value="UY">URUGUAY</option>
                                    <option value="VU">VANUATU</option>
                                    <option value="VE">VENEZUELA</option>
                                    <option value="VN">VIETNAM</option>
                                    <option value="WF">WALLIS AND FUTUNA</option>
                                    <option value="YE">YEMEN</option>
                                    <option value="ZM">ZAMBIA</option>
                                    <option value="ZW">ZIMBABWE</option>
                                </select>
                            </div>
                            <div class="form-group" id="receiverCompanyDiv">
                                <label>Company Name *</label>
                                <input type="text" name="receiverCompanyName" maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Last Name *</label>
                                <input type="text" name="receiverLastname" required maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Postal Code *</label>
                                <input type="text" name="receiverCP" required maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>First Name *</label>
                                <input type="text" name="receiverFirstname" maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>City *</label>
                                <input type="text" name="receiverCity" required maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Phone *</label>
                                <input type="tel" name="receiverHandphone" minlength="8" required maxlength="14">
                            </div>
                            <div class="form-group">
                                <label>Address *</label>
                                <input type="text" name="receiverAddress" required maxlength="60">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Email *</label>
                                <input type="email" name="receiverEmail" required maxlength="60">
                            </div>
                            <div class="form-group">
                                <label>Building Code</label>
                                <input type="text" name="receiverAddress3" maxlength="8">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Address Detail</label>
                                <input type="text" name="receiverAddress2" maxlength="20">
                            </div>
                            <div class="form-group">
                                <label>Receiver Reference</label>
                                <input type="text" name="receiverRef" maxlength="14">
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <label><input type="checkbox" name="dest_save"> Save this receiver for my next
                                shipments</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sections-grid">

                <div class="form-section">
                    <div class="section-header">
                        <span><span class="section-number">3</span> Parcel</span>
                    </div>
                    <div class="section-content">
                        <div class="form-row">

                            <div class="form-group">
                                <label>Unit Weight (kg) * <span class="info-icon"
                                        data-tooltip="Max 30kg">?</span></label>
                                <input type="number" name="packageWeight" id="weightInput" required step="0.1"
                                    placeholder="Ex: 5">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Shipment Name</label>
                                <input type="text" name="shippingRef" maxlength="15">
                            </div>
                            <div class="form-group">
                                <label>Shipment Date</label>
                                <input type="date" name="shippingDate_input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Length (cm) *</label>
                                <input type="number" name="packageLength" placeholder="L" min="30" max="150" required>
                            </div>
                            <div class="form-group">
                                <label>Width (cm) *</label>
                                <input type="number" name="packageWidth" placeholder="W" min="21" max="150" required>
                            </div>
                            <div class="form-group">
                                <label>Height (cm) *</label>
                                <input type="number" name="packageHeight" placeholder="H" min="1" max="150" required>
                            </div>
                        </div>
                        <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 5px;">
                            Minimum Dimensions: Length: 30cm, Width: 21cm, Height: 1cm
                        </div>
                        <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 15px;">
                            Maximum Dimensions: Length: 150cm, Width: 150cm, Height: 150cm.
                        </div>

                        <div class="form-group" style="margin-bottom: 15px;">
                            <label>Content Nature *</label>
                            <div class="radio-group">
                                <label><input type="radio" name="shippingContentNature" value="marchandise" checked>
                                    Goods</label>
                                <label><input type="radio" name="shippingContentNature" value="document">
                                    Document</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Shipment Content * <span class="info-icon"
                                    data-tooltip="Simple description (Lamp, Drill...)">?</span></label>
                            <input type="text" name="shippingContent" required maxlength="60"
                                placeholder="Ex: Clothes, Electronics...">
                        </div>

                        <fieldset style="border: 1px solid #444; padding: 10px; border-radius: 5px; margin-top: 15px;">
                            <legend style="color: #fff; padding: 0 5px;">Customs Information</legend>
                            <div class="form-group">
                                <label>Declared customs value * <span class="info-icon"
                                        data-tooltip="Tip: Set a low value (e.g., 1€) to limit customs fees.">i</span></label>
                                <div style="display: flex; align-items: center;">
                                    <input type="number" name="packageValue" required value="1"
                                        style="width: 100px; margin-right: 10px;">
                                    <span>€ (euros)</span>
                                </div>
                            </div>

                            <div class="alert-box"
                                style="background: rgba(50, 150, 255, 0.1); border-left: 3px solid #007bff; padding: 10px; margin: 10px 0; font-size: 0.85rem;">
                                You are legally required to attach either a pro-forma invoice or a commercial invoice to
                                your shipment, in 3 copies.
                            </div>


                        </fieldset>

                        <div class="checkbox-group" style="margin-top: 10px;">
                            <label><input type="checkbox" name="colis_save"> Save these features for my next
                                shipments</label>
                        </div>
                    </div>
                </div>


                <div class="form-section">
                    <div class="section-header">
                        <span><span class="section-number">4</span> Options & Notifications</span>
                    </div>
                    <div class="section-content">
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="shipmentTracking_box" checked> Sender email
                                tracking</label>
                            <input type="hidden" name="shipmentTracking" value="on">
                        </div>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="notifyTheReceiver_box" checked> Receiver email
                                tracking</label>
                            <input type="hidden" name="notifyTheReceiver" value="on">
                        </div>



                        <div class="form-group" style="margin-top: 15px;">
                            <label>Third Party Email (Receiving Label) *</label>
                            <input type="email" name="sendToThirdPersonInfo" required maxlength="60"
                                placeholder="Your email to receive the PDF">
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-bar">
                <button type="submit" class="btn-validate" id="btn-validate"
                    style="background-color: #28a745; width: 100%; color: white; border: none; padding: 15px; border-radius: 4px; cursor: pointer; font-size: 1.2rem; font-weight: bold;">Validate
                    and Pay Shipping Label (1€)</button>
            </div>



        </form>
        <a class="back" href="./chronopost-liste.html">Back</a>
    </main>
    <style>
        .country-wrapper {
            position: relative;
        }

        .country-input {
            width: 100% !important;
            text-align: left !important;
            padding: 12px 15px !important;
            background-color: #0d1117 !important;
            border: 1px solid #30363d !important;
            border-radius: 6px !important;
            color: #fff !important;
            font-size: 0.95rem !important;
            box-sizing: border-box !important;
        }

        .country-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #2b2b2b;

            border: 1px solid #444;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1001;

            display: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .country-option {
            padding: 10px;
            cursor: pointer;
            color: #eee;
            border-bottom: 1px solid #333;
        }

        .country-option:hover,
        .country-option.focus {
            background-color: #007bff;
            color: #fff;
        }
    </style>
    <script src="../js/chronopost-autocomplete-world.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {

            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('success')) {
                const savedData = localStorage.getItem('chronoData');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    localStorage.removeItem('chronoData');
                    performGeneration(data);
                }
            }

            initCountrySelector();

            try {

                document.querySelectorAll('input[type="checkbox"]').forEach(box => {
                    box.addEventListener('change', e => {
                        const hidden = e.target.parentElement.nextElementSibling;
                        if (hidden && hidden.type === 'hidden') {
                            hidden.value = e.target.checked ? 'on' : 'off';
                        }
                    });
                });


                function setupVisibilityToggle(radioName, divId) {
                    const radios = document.getElementsByName(radioName);
                    const targetDiv = document.getElementById(divId);
                    if (!targetDiv) return;

                    function update() {
                        const checked = document.querySelector(`input[name="${radioName}"]:checked`);
                        if (checked) {
                            if (checked.value === "0" || checked.value === "pro") {
                                targetDiv.style.display = "block";
                            } else {
                                targetDiv.style.display = "none";
                            }
                        }
                    }
                    radios.forEach(r => r.addEventListener('change', update));
                    update();
                }

                setupVisibilityToggle('senderType', 'senderCompanyDiv');
                setupVisibilityToggle('receiverType', 'receiverCompanyDiv');


                const weightInput = document.getElementById('weightInput');
                if (weightInput) {
                    weightInput.addEventListener('change', function () {
                        if (parseFloat(this.value) > 30) {
                            document.getElementById('weightModal').style.display = 'flex';
                            this.value = 30;
                        }
                    });
                }

            } catch (err) {
                console.error(err);
            }
        });

        function initCountrySelector() {
            const select = document.querySelector('select[name="receiverCountry"]');
            if (!select) return;


            const wrapper = document.createElement('div');
            wrapper.className = 'country-wrapper';
            select.parentNode.insertBefore(wrapper, select);
            wrapper.appendChild(select);


            select.style.display = 'none';


            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'country-input';
            input.placeholder = "Search country...";
            input.autocomplete = "off";
            wrapper.insertBefore(input, select);


            const list = document.createElement('div');
            list.className = 'country-list';
            wrapper.appendChild(list);


            const options = Array.from(select.options).map(opt => ({
                text: opt.text,
                value: opt.value
            })).filter(o => o.value);

            function renderList(filter = "") {
                list.innerHTML = '';
                const filtered = options.filter(o => o.text.toUpperCase().includes(filter.toUpperCase()));

                if (filtered.length === 0) {
                    const noRes = document.createElement('div');
                    noRes.className = 'country-option';
                    noRes.textContent = "No results found";
                    list.appendChild(noRes);
                    return;
                }

                filtered.forEach(opt => {
                    const div = document.createElement('div');
                    div.className = 'country-option';
                    div.textContent = opt.text;
                    div.dataset.value = opt.value;
                    div.onclick = () => {
                        input.value = opt.text;
                        select.value = opt.value;
                        list.style.display = 'none';

                        if (typeof updateDestCountry === 'function') updateDestCountry(select);
                    };
                    list.appendChild(div);
                });
            }


            input.addEventListener('focus', () => {
                renderList(input.value);
                list.style.display = 'block';
            });

            input.addEventListener('input', () => {
                renderList(input.value);
                list.style.display = 'block';
            });


            document.addEventListener('click', (e) => {
                if (!wrapper.contains(e.target)) {
                    list.style.display = 'none';


                }
            });
        }

        function closeWeightModal() {
            document.getElementById('weightModal').style.display = 'none';
        }

        function updateDestCountry(select) {


        }

        async function handleSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            if (!data.receiverLastname || !data.receiverFirstname || !data.receiverEmail || !data.receiverCountry) {
                alert("Please fill in the required receiver information (Country, Name, Firstname, Email).");
                return;
            }

            if (data.shippingDate_input) {
                const parts = data.shippingDate_input.split('-');
                if (parts.length === 3) {
                    const [y, m, d] = parts;
                    data.shippingDate = `${d}/${m}/${y}`;
                }
            }
            delete data.shippingDate_input;

            localStorage.setItem('chronoData', JSON.stringify(data));

            const statusDiv = document.getElementById('statusMessage');
            if (statusDiv) {
                statusDiv.textContent = "";
                statusDiv.className = "";
            }

            try {
                const btn = document.getElementById('btn-validate');
                if (btn) btn.disabled = true;

                const overlay = document.getElementById('overlay');
                if (overlay) overlay.style.visibility = 'visible';

                const API_BASE_PAY = "https://generate-docs-production.up.railway.app";
                const res = await fetch(`${API_BASE_PAY}/create-payment?product_name=chrono-express`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data)
                });

                if (!res.ok) throw new Error("Erreur create-payment");

                const result = await res.json();
                if (result.payment_url) {
                    window.open(result.payment_url, "_blank");
                    pollPaymentStatus(result.checkout_ref, data);
                } else {
                    throw new Error("No payment URL received");
                }
            } catch (err) {
                if (statusDiv) {
                    statusDiv.textContent = "Payment Error: " + err.message;
                    statusDiv.className = "error-message";
                }
                const btn = document.getElementById('btn-validate');
                if (btn) btn.disabled = false;
                const overlay = document.getElementById('overlay');
                if (overlay) overlay.style.visibility = 'hidden';
            }
        }

        function pollPaymentStatus(ref, data) {
            const API_BASE_PAY = "https://generate-docs-production.up.railway.app";
            const pollInterval = setInterval(async () => {
                try {
                    const statusRes = await fetch(`${API_BASE_PAY}/api/payment-status/${ref}`);
                    const statusData = await statusRes.json();

                    if (statusData.is_generated) {
                        clearInterval(pollInterval);
                        const statusDiv = document.getElementById('statusMessage');
                        if (statusDiv) {
                            statusDiv.textContent = "✅ Payment validated! Starting generation...";
                            statusDiv.style.color = "#28a745";
                        }
                        performGeneration(data);
                    }
                } catch (pollErr) {
                    console.error("Polling error:", pollErr);
                }
            }, 4000);
        }

        async function performGeneration(data) {
            const statusDiv = document.getElementById('statusMessage');
            if (statusDiv) {
                statusDiv.innerHTML = '';
                statusDiv.className = '';
            }

            const overlay = document.getElementById('overlay');
            if (overlay) overlay.style.visibility = 'visible';

            const btn = document.getElementById('btn-validate');
            const timerContainer = document.getElementById('timerContainer');
            const timerSpan = document.getElementById('timer');

            if (btn) btn.disabled = true;
            if (btn) btn.textContent = "Generation in progress...";

            timerContainer.style.display = 'block';
            let seconds = 0;
            timerSpan.textContent = "00:00";

            let timerInterval = setInterval(() => {
                seconds++;
                const m = Math.floor(seconds / 60).toString().padStart(2, '0');
                const s = (seconds % 60).toString().padStart(2, '0');
                timerSpan.textContent = `${m}:${s}`;
            }, 1000);

            try {
                const response = await fetch('https://chronopost.up.railway.app/generate-chronopost/generate-chronopost', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ data: data })
                });

                const result = await response.json();

                if (response.ok && result.status === 'success') {
                    if (statusDiv) {
                        statusDiv.textContent = "✅ Generation successful! The label has been sent to your email box. Remember to check your spams.";
                        statusDiv.className = "success-message";
                        statusDiv.style.boxShadow = "0 0 20px rgba(34, 197, 94, 0.5)";
                    }


                    if (result.proforma) {
                        try {
                            const byteCharacters = atob(result.proforma);
                            const byteNumbers = new Array(byteCharacters.length);
                            for (let i = 0; i < byteCharacters.length; i++) {
                                byteNumbers[i] = byteCharacters.charCodeAt(i);
                            }
                            const byteArray = new Uint8Array(byteNumbers);
                            const blob = new Blob([byteArray], { type: "application/pdf" });
                            const link = document.createElement('a');
                            link.href = window.URL.createObjectURL(blob);
                            link.download = "facture_proforma.pdf";
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                        } catch (e) {
                            console.error("Download Error", e);
                            statusDiv.textContent += " (Proforma download error)";
                        }
                    }

                } else {
                    throw new Error(result.message || "Unknown error");
                }
            } catch (error) {
                console.error(error);
                if (statusDiv) {
                    statusDiv.textContent = "Error: " + error.message;
                    statusDiv.className = "error-message";
                }
            } finally {
                if (overlay) overlay.style.visibility = 'hidden';
                if (timerInterval) clearInterval(timerInterval);
                if (timerContainer) timerContainer.style.display = 'none';
                if (btn) {
                    btn.disabled = false;
                    btn.textContent = "Validate and Pay shipping label (1€)";
                }
            }
        }

    </script>

    <div id="countryModal" class="country-modal" style="display:none;">
        <div class="country-modal-content">
            <span class="close-country-modal" onclick="closeCountryModalList()">X</span>
            <h3>Eligible countries (2026)</h3>
            <div class="search-modal-box">
                <input type="text" id="modalSearch" placeholder="Search a country..." onkeyup="filterCountryList()">
            </div>
            <ul class="country-zone-list" id="countryZoneList">
                <li>AFRIQUE DU SUD <span class="zone-badge">Zone 6</span></li>
                <li>ALBANIE <span class="zone-badge">Zone 4</span></li>
                <li>ALGÉRIE <span class="zone-badge">Zone 6</span></li>
                <li>ALLEMAGNE <span class="zone-badge">Zone 1</span></li>
                <li>ANDORRE <span class="zone-badge">Zone 4</span></li>
                <li>ANGOLA <span class="zone-badge">Zone 6</span></li>
                <li>ANGUILLA <span class="zone-badge">Zone 5</span></li>
                <li>ANTIGUA-ET-BARBUDA <span class="zone-badge">Zone 5</span></li>
                <li>ANTILLES NÉERLANDAISES (SAUF SAINT-MARTIN) <span class="zone-badge">Zone 5</span></li>
                <li>ARABIE SAOUDITE <span class="zone-badge">Zone 6</span></li>
                <li>ARGENTINE <span class="zone-badge">Zone 5</span></li>
                <li>ARMÉNIE <span class="zone-badge">Zone 4</span></li>
                <li>ARUBA <span class="zone-badge">Zone 5</span></li>
                <li>AUSTRALIE <span class="zone-badge">Zone 7</span></li>
                <li>AUTRICHE <span class="zone-badge">Zone 2</span></li>
                <li>AZERBAÏDJAN <span class="zone-badge">Zone 6</span></li>
                <li>BAHAMAS <span class="zone-badge">Zone 5</span></li>
                <li>BAHREÏN <span class="zone-badge">Zone 6</span></li>
                <li>BANGLADESH <span class="zone-badge">Zone 7</span></li>
                <li>BARBADE <span class="zone-badge">Zone 5</span></li>
                <li>BELGIQUE <span class="zone-badge">Zone 1</span></li>
                <li>BELIZE <span class="zone-badge">Zone 5</span></li>
                <li>BENIN <span class="zone-badge">Zone 6</span></li>
                <li>BERMUDES <span class="zone-badge">Zone 5</span></li>
                <li>BHOUTAN <span class="zone-badge">Zone 7</span></li>
                <li>BOLIVIE <span class="zone-badge">Zone 5</span></li>
                <li>BOSNIE-HERZÉGOVINE <span class="zone-badge">Zone 4</span></li>
                <li>BOTSWANA <span class="zone-badge">Zone 6</span></li>
                <li>BRESIL <span class="zone-badge">Zone 5</span></li>
                <li>BRUNÉI DARUSSALAM <span class="zone-badge">Zone 7</span></li>
                <li>BULGARIE <span class="zone-badge">Zone 3</span></li>
                <li>BURKINA FASO <span class="zone-badge">Zone 6</span></li>
                <li>BURUNDI <span class="zone-badge">Zone 6</span></li>
                <li>CAMBODGE <span class="zone-badge">Zone 7</span></li>
                <li>CAMEROUN <span class="zone-badge">Zone 6</span></li>
                <li>CANADA <span class="zone-badge">Zone 5</span></li>
                <li>CANARIES (ÎLES DES) <span class="zone-badge">Zone 4</span></li>
                <li>CAP-VERT <span class="zone-badge">Zone 6</span></li>
                <li>CAYMAN (ÎLES) <span class="zone-badge">Zone 5</span></li>
                <li>CENTRAFRICAINE (RÉPUBLIQUE) <span class="zone-badge">Zone 6</span></li>
                <li>CHILI <span class="zone-badge">Zone 5</span></li>
                <li>CHINE <span class="zone-badge">Zone 7</span></li>
                <li>CHRISTMAS (ÎLES) <span class="zone-badge">Zone 7</span></li>
                <li>CHYPRE <span class="zone-badge">Zone 3</span></li>
                <li>COCOS (KEELING) (ÎLES) <span class="zone-badge">Zone 7</span></li>
                <li>COLOMBIE <span class="zone-badge">Zone 5</span></li>
                <li>COMORES <span class="zone-badge">Zone 6</span></li>
                <li>CONGO (RÉPUBLIQUE DÉMOCRATIQUE DU) <span class="zone-badge">Zone 6</span></li>
                <li>CONGO . <span class="zone-badge">Zone 6</span></li>
                <li>COOK (ÎLES) <span class="zone-badge">Zone 7</span></li>
                <li>CORÉE DU SUD <span class="zone-badge">Zone 7</span></li>
                <li>COSTA RICA <span class="zone-badge">Zone 5</span></li>
                <li>COTE D'IVOIRE <span class="zone-badge">Zone 6</span></li>
                <li>CROATIE <span class="zone-badge">Zone 3</span></li>
                <li>DANEMARK <span class="zone-badge">Zone 2</span></li>
                <li>DJIBOUTI <span class="zone-badge">Zone 6</span></li>
                <li>DOMINICAINE (RÉPUBLIQUE) <span class="zone-badge">Zone 5</span></li>
                <li>DOMINIQUE <span class="zone-badge">Zone 5</span></li>
                <li>EGYPTE <span class="zone-badge">Zone 6</span></li>
                <li>EL SALVADOR <span class="zone-badge">Zone 5</span></li>
                <li>EMIRATS ARABES UNIS <span class="zone-badge">Zone 6</span></li>
                <li>EQUATEUR <span class="zone-badge">Zone 5</span></li>
                <li>ERYTHRÉE <span class="zone-badge">Zone 6</span></li>
                <li>ESPAGNE <span class="zone-badge">Zone 2</span></li>
                <li>ESTONIE <span class="zone-badge">Zone 3</span></li>
                <li>ETATS-UNIS D'AMÉRIQUE <span class="zone-badge">Zone 5</span></li>
                <li>ETHIOPIE <span class="zone-badge">Zone 6</span></li>
                <li>FEROÉ (ÎLES) <span class="zone-badge">Zone 4</span></li>
                <li>FIDJI <span class="zone-badge">Zone 7</span></li>
                <li>FINLANDE <span class="zone-badge">Zone 2</span></li>
                <li>GABON <span class="zone-badge">Zone 6</span></li>
                <li>GAMBIE <span class="zone-badge">Zone 6</span></li>
                <li>GEORGIE <span class="zone-badge">Zone 4</span></li>
                <li>GHANA <span class="zone-badge">Zone 6</span></li>
                <li>GIBRALTAR <span class="zone-badge">Zone 4</span></li>
                <li>GRANDE-BRETAGNE ET IRLANDE DU NORD <span class="zone-badge">Zone 2</span></li>
                <li>GRECE <span class="zone-badge">Zone 2</span></li>
                <li>GRENADE <span class="zone-badge">Zone 5</span></li>
                <li>GROENLAND <span class="zone-badge">Zone 5</span></li>
                <li>GUADELOUPE <span class="zone-badge">Zone 8</span></li>
                <li>GUAM <span class="zone-badge">Zone 7</span></li>
                <li>GUATEMALA <span class="zone-badge">Zone 5</span></li>
                <li>GUERNESEY <span class="zone-badge">Zone 4</span></li>
                <li>GUINÉE . <span class="zone-badge">Zone 6</span></li>
                <li>GUINÉE ÉQUATORIALE <span class="zone-badge">Zone 6</span></li>
                <li>GUINÉE-BISSAU <span class="zone-badge">Zone 6</span></li>
                <li>GUYANA <span class="zone-badge">Zone 5</span></li>
                <li>GUYANE <span class="zone-badge">Zone 9</span></li>
                <li>HAÏTI <span class="zone-badge">Zone 5</span></li>
                <li>HONDURAS <span class="zone-badge">Zone 5</span></li>
                <li>HONG-KONG <span class="zone-badge">Zone 7</span></li>
                <li>HONGRIE <span class="zone-badge">Zone 3</span></li>
                <li>INDE <span class="zone-badge">Zone 7</span></li>
                <li>INDONÉSIE <span class="zone-badge">Zone 7</span></li>
                <li>IRAK <span class="zone-badge">Zone 6</span></li>
                <li>IRLANDE <span class="zone-badge">Zone 2</span></li>
                <li>ISLANDE <span class="zone-badge">Zone 4</span></li>
                <li>ISRAËL <span class="zone-badge">Zone 6</span></li>
                <li>ITALIE <span class="zone-badge">Zone 2</span></li>
                <li>JAMAÏQUE <span class="zone-badge">Zone 5</span></li>
                <li>JAPON <span class="zone-badge">Zone 7</span></li>
                <li>JERSEY <span class="zone-badge">Zone 4</span></li>
                <li>JORDANIE <span class="zone-badge">Zone 6</span></li>
                <li>KAZAKHSTAN <span class="zone-badge">Zone 7</span></li>
                <li>KENYA <span class="zone-badge">Zone 6</span></li>
                <li>KIRGHIZISTAN <span class="zone-badge">Zone 7</span></li>
                <li>KIRIBATI <span class="zone-badge">Zone 7</span></li>
                <li>KOWEÏT <span class="zone-badge">Zone 6</span></li>
                <li>LAOS <span class="zone-badge">Zone 7</span></li>
                <li>LESOTHO <span class="zone-badge">Zone 6</span></li>
                <li>LETTONIE <span class="zone-badge">Zone 3</span></li>
                <li>LIBAN <span class="zone-badge">Zone 6</span></li>
                <li>LIBERIA <span class="zone-badge">Zone 6</span></li>
                <li>LIBYE <span class="zone-badge">Zone 6</span></li>
                <li>LIECHTENSTEIN <span class="zone-badge">Zone 4</span></li>
                <li>LITUANIE <span class="zone-badge">Zone 3</span></li>
                <li>LUXEMBOURG <span class="zone-badge">Zone 1</span></li>
                <li>MACAO <span class="zone-badge">Zone 7</span></li>
                <li>MACÉDOINE <span class="zone-badge">Zone 4</span></li>
                <li>MADAGASCAR <span class="zone-badge">Zone 6</span></li>
                <li>MALAISIE <span class="zone-badge">Zone 7</span></li>
                <li>MALAWI <span class="zone-badge">Zone 6</span></li>
                <li>MALDIVES <span class="zone-badge">Zone 7</span></li>
                <li>MALI <span class="zone-badge">Zone 6</span></li>
                <li>MALTE <span class="zone-badge">Zone 3</span></li>
                <li>MARIANNES DU NORD (ÎLES) <span class="zone-badge">Zone 9</span></li>
                <li>MAROC <span class="zone-badge">Zone 6</span></li>
                <li>MARSHALL (ÎLES) <span class="zone-badge">Zone 7</span></li>
                <li>MARTINIQUE <span class="zone-badge">Zone 8</span></li>
                <li>MAURICE <span class="zone-badge">Zone 6</span></li>
                <li>MAURITANIE <span class="zone-badge">Zone 6</span></li>
                <li>MAYOTTE <span class="zone-badge">Zone 9</span></li>
                <li>MEXIQUE <span class="zone-badge">Zone 5</span></li>
                <li>MICRONÉSIE (ÎLES CAROLINES) <span class="zone-badge">Zone 7</span></li>
                <li>MOLDAVIE <span class="zone-badge">Zone 4</span></li>
                <li>MONGOLIE <span class="zone-badge">Zone 7</span></li>
                <li>MONTSERRAT <span class="zone-badge">Zone 5</span></li>
                <li>MONTÉNÉGRO <span class="zone-badge">Zone 4</span></li>
                <li>MOZAMBIQUE <span class="zone-badge">Zone 6</span></li>
                <li>NAMIBIE <span class="zone-badge">Zone 6</span></li>
                <li>NAURU <span class="zone-badge">Zone 7</span></li>
                <li>NEPAL <span class="zone-badge">Zone 7</span></li>
                <li>NICARAGUA <span class="zone-badge">Zone 5</span></li>
                <li>NIGER <span class="zone-badge">Zone 6</span></li>
                <li>NIGÉRIA <span class="zone-badge">Zone 6</span></li>
                <li>NORFOLK (ÎLE) <span class="zone-badge">Zone 7</span></li>
                <li>NORVÈGE <span class="zone-badge">Zone 4</span></li>
                <li>NOUVELLE-CALÉDONIE <span class="zone-badge">Zone 9</span></li>
                <li>NOUVELLE-ZÉLANDE <span class="zone-badge">Zone 7</span></li>
                <li>OMAN (SULTANAT D') <span class="zone-badge">Zone 6</span></li>
                <li>OUGANDA <span class="zone-badge">Zone 6</span></li>
                <li>OUZBÉKISTAN <span class="zone-badge">Zone 7</span></li>
                <li>PAKISTAN <span class="zone-badge">Zone 7</span></li>
                <li>PALAU <span class="zone-badge">Zone 7</span></li>
                <li>PALESTINE <span class="zone-badge">Zone 6</span></li>
                <li>PANAMA <span class="zone-badge">Zone 5</span></li>
                <li>PAPOUASIE-NOUVELLE-GUINÉE <span class="zone-badge">Zone 7</span></li>
                <li>PARAGUAY <span class="zone-badge">Zone 5</span></li>
                <li>PAYS-BAS <span class="zone-badge">Zone 1</span></li>
                <li>PEROU <span class="zone-badge">Zone 5</span></li>
                <li>PHILIPPINES <span class="zone-badge">Zone 7</span></li>
                <li>POLOGNE <span class="zone-badge">Zone 3</span></li>
                <li>POLYNÉSIE FRANÇAISE <span class="zone-badge">Zone 9</span></li>
                <li>PORTO RICO <span class="zone-badge">Zone 5</span></li>
                <li>PORTUGAL <span class="zone-badge">Zone 2</span></li>
                <li>QATAR <span class="zone-badge">Zone 6</span></li>
                <li>REUNION <span class="zone-badge">Zone 8</span></li>
                <li>ROUMANIE <span class="zone-badge">Zone 3</span></li>
                <li>RWANDA <span class="zone-badge">Zone 6</span></li>
                <li>SAINT-BARTHÉLEMY <span class="zone-badge">Zone 8</span></li>
                <li>SAINT-CHRISTOPHE ET NÉVIS <span class="zone-badge">Zone 5</span></li>
                <li>SAINT-MARTIN - PARTIE FRANÇAISE <span class="zone-badge">Zone 8</span></li>
                <li>SAINT-MARTIN - PARTIE NÉERLANDAISE <span class="zone-badge">Zone 8</span></li>
                <li>SAINT-PIERRE-ET-MIQUELON <span class="zone-badge">Zone 9</span></li>
                <li>SAINT-VINCENT-ET-LES GRENADINES <span class="zone-badge">Zone 5</span></li>
                <li>SAINTE-LUCIE <span class="zone-badge">Zone 5</span></li>
                <li>SALOMON <span class="zone-badge">Zone 7</span></li>
                <li>SAMOA AMÉRICAINES (ÎLES) <span class="zone-badge">Zone 7</span></li>
                <li>SAMOA OCCIDENTALES <span class="zone-badge">Zone 7</span></li>
                <li>SAN MARIN <span class="zone-badge">Zone 4</span></li>
                <li>SAO TOMÉ-ET-PRINCIPE <span class="zone-badge">Zone 6</span></li>
                <li>SENÉGAL <span class="zone-badge">Zone 6</span></li>
                <li>SERBIE / KOSOVO <span class="zone-badge">Zone 4</span></li>
                <li>SEYCHELLES <span class="zone-badge">Zone 6</span></li>
                <li>SIERRA LEONE <span class="zone-badge">Zone 6</span></li>
                <li>SINGAPOUR <span class="zone-badge">Zone 7</span></li>
                <li>SLOVAQUIE <span class="zone-badge">Zone 3</span></li>
                <li>SLOVÉNIE <span class="zone-badge">Zone 3</span></li>
                <li>SOMALIE <span class="zone-badge">Zone 6</span></li>
                <li>SRI LANKA <span class="zone-badge">Zone 7</span></li>
                <li>SUEDE <span class="zone-badge">Zone 2</span></li>
                <li>SUISSE <span class="zone-badge">Zone 4</span></li>
                <li>SURINAM <span class="zone-badge">Zone 5</span></li>
                <li>SWAZILAND <span class="zone-badge">Zone 6</span></li>
                <li>TAIWAN <span class="zone-badge">Zone 7</span></li>
                <li>TANZANIE <span class="zone-badge">Zone 6</span></li>
                <li>TCHAD <span class="zone-badge">Zone 6</span></li>
                <li>TCHÈQUE (RÉPUBLIQUE) <span class="zone-badge">Zone 3</span></li>
                <li>THAÏLANDE <span class="zone-badge">Zone 7</span></li>
                <li>TIMOR ORIENTAL <span class="zone-badge">Zone 7</span></li>
                <li>TOGO <span class="zone-badge">Zone 6</span></li>
                <li>TONGA <span class="zone-badge">Zone 7</span></li>
                <li>TRINITÉ-ET-TOBAGO <span class="zone-badge">Zone 5</span></li>
                <li>TUNISIE <span class="zone-badge">Zone 6</span></li>
                <li>TURQUES ET CAIQUES <span class="zone-badge">Zone 5</span></li>
                <li>TURQUIE <span class="zone-badge">Zone 4</span></li>
                <li>TUVALU <span class="zone-badge">Zone 7</span></li>
                <li>URUGUAY <span class="zone-badge">Zone 5</span></li>
                <li>VANUATU <span class="zone-badge">Zone 7</span></li>
                <li>VATICAN <span class="zone-badge">Zone 4</span></li>
                <li>VIERGES AMÉRICAINES (ÎLES) <span class="zone-badge">Zone 5</span></li>
                <li>VIERGES BRITANNIQUES (ÎLES) <span class="zone-badge">Zone 5</span></li>
                <li>VIET NAM <span class="zone-badge">Zone 7</span></li>
                <li>WALLIS ET FUTUNA <span class="zone-badge">Zone 9</span></li>
                <li>ZAMBIE <span class="zone-badge">Zone 6</span></li>
                <li>ZIMBABWE <span class="zone-badge">Zone 6</span></li>
            </ul>
        </div>
    </div>
    <style>
        .country-eligible-btn {
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            color: #fff;
            text-decoration: underline;
        }

        .country-eligible-btn:hover {
            text-decoration: none;
            opacity: 0.9;
        }

        .country-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2005;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .country-modal-content {
            background: #2b2b2b;
            padding: 20px;
            border: 1px solid #444;
            width: 350px;
            max-height: 80vh;
            overflow-y: hidden;

            display: flex;
            flex-direction: column;
            position: relative;
            color: #fff;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }

        .close-country-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-weight: bold;
            background: #444;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .close-country-modal:hover {
            background: #555;
        }

        .country-modal-content h3 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-align: center;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }

        .search-modal-box {
            margin-bottom: 10px;
        }

        .search-modal-box input {
            width: 100%;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #555;
            background: #333;
            color: #fff;
        }

        .country-zone-list {
            list-style: none;
            padding: 0;
            margin: 0;
            overflow-y: auto;
            flex: 1;
            padding-right: 5px;
        }


        .country-zone-list::-webkit-scrollbar {
            width: 8px;
        }

        .country-zone-list::-webkit-scrollbar-track {
            background: #222;
        }

        .country-zone-list::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        .country-zone-list::-webkit-scrollbar-thumb:hover {
            background: #007bff;
        }

        .country-zone-list li {
            padding: 8px 5px;
            border-bottom: 1px solid #3d3d3d;
            font-size: 0.85rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .country-zone-list li:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .zone-badge {
            background: #007bff;
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
        }
    </style>
    <script>

        function openCountryModal() {
            document.getElementById('countryModal').style.display = 'flex';
            document.getElementById('modalSearch').focus();
        }
        function closeCountryModalList() {
            document.getElementById('countryModal').style.display = 'none';
        }

        document.getElementById('countryModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeCountryModalList();
            }
        });

        function filterCountryList() {
            const input = document.getElementById('modalSearch');
            const filter = input.value.toUpperCase();
            const ul = document.getElementById('countryZoneList');
            const li = ul.getElementsByTagName('li');

            for (let i = 0; i < li.length; i++) {
                const txtValue = li[i].textContent || li[i].innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.display = "none";
                }
            }
        }

    </script>
</body>

</html>