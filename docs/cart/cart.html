<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>Mon Panier - OnlineTools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Base Styles -->
  <link rel="stylesheet" href="../css/home.css">
  <!-- Specific Cart Styles (Redesigned) -->
  <link rel="stylesheet" href="../css/cart.css">
  <!-- Icons (Optional, using text/svg fallback if needed) -->
</head>

<body>

  <header class="header">
    <div class="header-inner">
      <a href="../index.html" class="logo">OnlineTools</a>
      <nav class="nav">
        <a href="../index.html">Home</a>
        <a href="../tools/tools-liste.html">Tools</a>
        <a href="../contact.html">Contact</a>
        <a href="cart.html">Panier</a>
      </nav>
    </div>
  </header>

  <main class="cart-layout">

    <!-- Left Column: Cart Items -->
    <div class="cart-main">
      <div class="cart-header">
        <h1 class="cart-title">Mon Panier</h1>
        <p id="cartCount" class="cart-count">Vous avez 0 articles</p>
      </div>

      <div id="cartList" class="cart-items-container">
        <!-- Items will be injected here via JS -->
      </div>
    </div>

    <!-- Right Column: Summary -->
    <aside class="cart-sidebar">
      <div class="cart-summary-panel">
        <h2 class="summary-title">RÃ©sumÃ© de la commande</h2>

        <div class="summary-row">
          <span>Sous-total</span>
          <span id="subtotal">0.00 â‚¬</span>
        </div>
        <div class="summary-row">
          <span>Remise</span>
          <span>-0.00 â‚¬</span>
        </div>

        <div class="summary-row total">
          <span>Total</span>
          <span id="total">0.00 â‚¬</span>
        </div>

        <button id="payBtn" class="btn-checkout">Payer maintenant</button>

        <p class="security-note">
          ðŸ”’ Paiement 100% SÃ©curisÃ©
        </p>
      </div>
    </aside>

  </main>

  <script>
    const cartList = document.getElementById("cartList");
    const subtotalEl = document.getElementById("subtotal");
    const totalEl = document.getElementById("total");
    const cartCountEl = document.getElementById("cartCount");

    let cart = JSON.parse(localStorage.getItem("cart") || "[]");

    function render() {
      cartList.innerHTML = "";
      let total = 0;

      if (cart.length === 0) {
        cartList.innerHTML = `
                    <div class="empty-cart">
                        <h3>Votre panier est vide</h3>
                        <p>DÃ©couvrez nos outils pour commencer.</p>
                        <a href="../tools/tools-liste.html" style="display:inline-block; margin-top:15px; color:#3b82f6;">Voir les outils</a>
                    </div>
                `;
        subtotalEl.textContent = "0.00 â‚¬";
        totalEl.textContent = "0.00 â‚¬";
        cartCountEl.textContent = "Vous avez 0 articles";
        return;
      }

      cart.forEach((item, i) => {
        total += item.price;

        const div = document.createElement("div");
        div.className = "cart-item";

        // SVG Icon placeholder based on item name (simple logic)
        const icon = "ðŸ“„";

        div.innerHTML = `
                    <div class="item-info">
                        <div class="item-icon">${icon}</div>
                        <div class="item-details">
                            <h3>${item.name}</h3>
                            <p>Document numÃ©rique (PDF)</p>
                        </div>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="item-price">${item.price.toFixed(2)} â‚¬</span>
                        <button class="btn-remove" title="Supprimer">âœ•</button>
                    </div>
                `;

        // Bind remove event
        div.querySelector(".btn-remove").onclick = () => removeItem(i);

        cartList.appendChild(div);
      });

      const totalStr = total.toFixed(2) + " â‚¬";
      subtotalEl.textContent = totalStr;
      totalEl.textContent = totalStr;
      cartCountEl.textContent = `Vous avez ${cart.length} article(s)`;
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      render();
    }

    document.getElementById("payBtn").onclick = () => {
      if (cart.length > 0) {
        alert("Redirection vers la passerelle de paiement...");
      } else {
        alert("Votre panier est vide.");
      }
    };

    // Initial render
    render();
  </script>

</body>

</html>